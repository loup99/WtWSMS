###########################################
#
# Society decisions for secret religious societies
#
###########################################

society_decisions = {
	
	secret_religions_openly_adopt_faith = {
		is_high_prio = yes
		
		potential = {
			society_member_of = secret_religious_cult

			society_rank == 4
		}
	
		allow = {
			OR = {
				AND = {
					has_society_currency_major_trigger = yes
					ROOTs_secret_religion_is_playable_trigger = yes	
				}
				hidden_tooltip = {
					ai = yes
				}
			}
			prisoner = no
			NOT = { trait = incapable }
			NOT = { is_inaccessible_trigger = yes }
			war = no
		}
		
		effect = {
			#hidden_effect = { # To track the number of Revealed Cults
			#	change_variable = { which = global_revealed_cults value = 1 }
			#	if = {
			#		limit = {
			#			secret_religion = catholic
			#		}
			#		change_variable = { which = global_catholic_revealed_cults value = 1 }
			#	}
			#	if = {
			#		limit = {
			#			secret_religion = cathar
			#		}
			#		change_variable = { which = global_cathar_revealed_cults value = 1 }
			#	}
			#	if = {
			#		limit = {
			#			secret_religion = fraticelli
			#		}
			#		change_variable = { which = global_fraticelli_revealed_cults value = 1 }
			#	}
			#	if = {
			#		limit = {
			#			secret_religion = waldensian
			#		}
			#		change_variable = { which = global_waldensian_revealed_cults value = 1 }
			#	}
			#	if = {
			#		limit = {
			#			secret_religion = lollard
			#		}
			#		change_variable = { which = global_lollard_revealed_cults value = 1 }
			#	}
			#	if = {
			#		limit = {
			#			secret_religion = orthodox
			#		}
			#		change_variable = { which = global_orthodox_revealed_cults value = 1 }
			#	}
			#	if = {
			#		limit = {
			#			secret_religion = miaphysite
			#		}
			#		change_variable = { which = global_miaphysite_revealed_cults value = 1 }
			#	}
			#	if = {
			#		limit = {
			#			secret_religion = monophysite
			#		}
			#		change_variable = { which = global_monophysite_revealed_cults value = 1 }
			#	}
			#	if = {
			#		limit = {
			#			secret_religion = bogomilist
			#		}
			#		change_variable = { which = global_bogomilist_revealed_cults value = 1 }
			#	}
			#	if = {
			#		limit = {
			#			secret_religion = monothelite
			#		}
			#		change_variable = { which = global_monothelite_revealed_cults value = 1 }
			#	}
			#	if = {
			#		limit = {
			#			secret_religion = iconoclast
			#		}
			#		change_variable = { which = global_iconoclast_revealed_cults value = 1 }
			#	}
			#	if = {
			#		limit = {
			#			secret_religion = paulician
			#		}
			#		change_variable = { which = global_paulician_revealed_cults value = 1 }
			#	}
			#	if = {
			#		limit = {
			#			secret_religion = nestorian
			#		}
			#		change_variable = { which = global_nestorian_revealed_cults value = 1 }
			#	}
			#	if = {
			#		limit = {
			#			secret_religion = messalian
			#		}
			#		change_variable = { which = global_messalian_revealed_cults value = 1 }
			#	}
			#	if = {
			#		limit = {
			#			secret_religion = sunni
			#		}
			#		change_variable = { which = global_sunni_revealed_cults value = 1 }
			#	}
			#	if = {
			#		limit = {
			#			secret_religion = zikri
			#		}
			#		change_variable = { which = global_zikri_revealed_cults value = 1 }
			#	}
			#	if = {
			#		limit = {
			#			secret_religion = yazidi
			#		}
			#		change_variable = { which = global_yazidi_revealed_cults value = 1 }
			#	}
			#	if = {
			#		limit = {
			#			secret_religion = ibadi
			#		}
			#		change_variable = { which = global_ibadi_revealed_cults value = 1 }
			#	}
			#	if = {
			#		limit = {
			#			secret_religion = kharijite
			#		}
			#		change_variable = { which = global_kharijite_revealed_cults value = 1 }
			#	}
			#	if = {
			#		limit = {
			#			secret_religion = shiite
			#		}
			#		change_variable = { which = global_shiite_revealed_cults value = 1 }
			#	}
			#	if = {
			#		limit = {
			#			secret_religion = druze
			#		}
			#		change_variable = { which = global_druze_revealed_cults value = 1 }
			#	}
			#	if = {
			#		limit = {
			#			secret_religion = hurufi
			#		}
			#		change_variable = { which = global_hurufi_revealed_cults value = 1 }
			#	}
			#	if = {
			#		limit = {
			#			secret_religion = jewish
			#		}
			#		change_variable = { which = global_jewish_revealed_cults value = 1 }
			#	}
			#	if = {
			#		limit = {
			#			secret_religion = karaite
			#		}
			#		change_variable = { which = global_karaite_revealed_cults value = 1 }
			#	}
			#	if = {
			#		limit = {
			#			secret_religion = samaritan
			#		}
			#		change_variable = { which = global_samaritan_revealed_cults value = 1 }
			#	}
			#	if = {
			#		limit = {
			#			secret_religion = zoroastrian
			#		}
			#		change_variable = { which = global_zoroastrian_revealed_cults value = 1 }
			#	}
			#	if = {
			#		limit = {
			#			secret_religion = mazdaki
			#		}
			#		change_variable = { which = global_mazdaki_revealed_cults value = 1 }
			#	}
			#	if = {
			#		limit = {
			#			secret_religion = manichean
			#		}
			#		change_variable = { which = global_manichean_revealed_cults value = 1 }
			#	}
			#	if = {
			#		limit = {
			#			secret_religion = khurmazta
			#		}
			#		change_variable = { which = global_khurmazta_revealed_cults value = 1 }
			#	}
			#	if = {
			#		limit = {
			#			secret_religion = bon
			#		}
			#		change_variable = { which = global_bon_revealed_cults value = 1 }
			#	}
			#	if = {
			#		limit = {
			#			secret_religion = taoist
			#		}
			#		change_variable = { which = global_taoist_revealed_cults value = 1 }
			#	}
			#	if = {
			#		limit = {
			#			secret_religion = hindu
			#		}
			#		change_variable = { which = global_hindu_revealed_cults value = 1 }
			#	}
			#	if = {
			#		limit = {
			#			secret_religion = buddhist
			#		}
			#		change_variable = { which = global_buddhist_revealed_cults value = 1 }
			#	}
			#	if = {
			#		limit = {
			#			secret_religion = jain
			#		}
			#		change_variable = { which = global_jain_revealed_cults value = 1 }
			#	}
			#	if = {
			#		limit = {
			#			secret_religion = norse_pagan_reformed
			#		}
			#		change_variable = { which = global_norse_pagan_reformed_revealed_cults value = 1 }
			#	}
			#	if = {
			#		limit = {
			#			secret_religion = norse_pagan
			#		}
			#		change_variable = { which = global_norse_pagan_revealed_cults value = 1 }
			#	}
			#	if = {
			#		limit = {
			#			secret_religion = baltic_pagan_reformed
			#		}
			#		change_variable = { which = global_baltic_pagan_reformed_revealed_cults value = 1 }
			#	}
			#	if = {
			#		limit = {
			#			secret_religion = baltic_pagan
			#		}
			#		change_variable = { which = global_baltic_pagan_revealed_cults value = 1 }
			#	}
			#	if = {
			#		limit = {
			#			secret_religion = finnish_pagan_reformed
			#		}
			#		change_variable = { which = global_finnish_pagan_reformed_revealed_cults value = 1 }
			#	}
			#	if = {
			#		limit = {
			#			secret_religion = finnish_pagan
			#		}
			#		change_variable = { which = global_finnish_pagan_revealed_cults value = 1 }
			#	}
			#	if = {
			#		limit = {
			#			secret_religion = slavic_pagan_reformed
			#		}
			#		change_variable = { which = global_slavic_pagan_reformed_revealed_cults value = 1 }
			#	}
			#	if = {
			#		limit = {
			#			secret_religion = slavic_pagan
			#		}
			#		change_variable = { which = global_slavic_pagan_revealed_cults value = 1 }
			#	}
			#	if = {
			#		limit = {
			#			secret_religion = tengri_pagan_reformed
			#		}
			#		change_variable = { which = global_tengri_pagan_reformed_revealed_cults value = 1 }
			#	}
			#	if = {
			#		limit = {
			#			secret_religion = tengri_pagan
			#		}
			#		change_variable = { which = global_tengri_pagan_revealed_cults value = 1 }
			#	}
			#	if = {
			#		limit = {
			#			secret_religion = west_african_pagan_reformed
			#		}
			#		change_variable = { which = global_west_african_pagan_reformed_revealed_cults value = 1 }
			#	}
			#	if = {
			#		limit = {
			#			secret_religion = west_african_pagan
			#		}
			#		change_variable = { which = global_west_african_pagan_revealed_cults value = 1 }
			#	}
			#	if = {
			#		limit = {
			#			secret_religion = zun_pagan_reformed
			#		}
			#		change_variable = { which = global_zun_pagan_reformed_revealed_cults value = 1 }
			#	}
			#	if = {
			#		limit = {
			#			secret_religion = zun_pagan
			#		}
			#		change_variable = { which = global_zun_pagan_revealed_cults value = 1 }
			#	}
			#	if = {
			#		limit = {
			#			secret_religion = aztec
			#		}
			#		change_variable = { which = global_aztec_revealed_cults value = 1 }
			#	}
			#	if = {
			#		limit = {
			#			secret_religion = aztec_reformed
			#		}
			#		change_variable = { which = global_aztec_reformed_revealed_cults value = 1 }
			#	}
			#}
			detract_society_currency_major_effect = yes
			custom_tooltip = {
				text = openly_adopt_faith_effect_tooltip
				if = { # Caliphates and Fylkirates are forfeit
					limit = {
						OR = {
							religion_group = muslim
							religion = norse_pagan_reformed
							religion = hellenic_pagan
						}
						any_demesne_title = {
							controls_religion = yes
						}
					}
					any_demesne_title = {
						limit = {
							controls_religion = yes
						}
						destroy_landed_title = THIS
					}
				}
				if = { # Papacies are given to a random new character
					limit = {
						NOR = {
							religion_group = muslim
							religion = norse_pagan_reformed
						}
						any_demesne_title = {
							controls_religion = yes
						}
					}
					hidden_tooltip = {
						liege = {
							save_event_target_as = liege_target
						}
						create_character = {
							age = 38
							dynasty = random
							religion = ROOT
							culture = ROOT
							random_traits = yes
						}
						new_character = {
							save_event_target_as = new_holder
						}
					}
					any_demesne_title = {
						limit = {
							controls_religion = yes
						}
						grant_title = event_target:new_holder
						holder_scope = {
							any_vassal = {
								set_defacto_liege = event_target:liege_target
							}
						}
					}
					hidden_tooltip = {
						set_defacto_liege = event_target:liege_target
					}
				}
				if = { # Holy Orders/Static Mercs are given to a random new character
					limit = {
						any_demesne_title = {
							OR = {
								holy_order = yes
								mercenary = yes
							}
						}
					}
					hidden_tooltip = {
						liege = {
							save_event_target_as = liege_target
						}
						create_character = {
							age = 38
							dynasty = random
							religion = ROOT
							culture = ROOT
							random_traits = yes
						}
						new_character = {
							save_event_target_as = new_holder
						}
					}
					any_demesne_title = {
						limit = {
							OR = {
								holy_order = yes
								mercenary = yes
							}
						}
						grant_title = event_target:new_holder
						holder_scope = {
							any_vassal = {
								set_defacto_liege = event_target:liege_target
							}
						}
					}
					hidden_tooltip = {
						set_defacto_liege = event_target:liege_target
					}
				}
				hidden_effect = {
					character_event = { id = MNM.3811 }
					any_society_member = {
						if = {
							limit = {
								NOT = {
									character = ROOT
								}
								same_society_as = ROOT
							}
							character_event = { id = MNM.3800 } # Convert cultists
						}
					}
					top_liege = {
						any_realm_character = {
							if = {
								limit = {
									NOT = {
										same_society_as = ROOT
									}
									OR = {
										has_prevs_secret_religion_truly_trigger = yes
										has_sympathy_for_true_religion_of_prev_trigger = yes
									}
								}
								character_event = { id = MNM.3810 } # Allow sympathisers the chance to flip
							}
							
							if = {
								limit = {
									is_ruler = yes
									any_demesne_province = {
										OR = {
										
											### WtWSMS ###
											AND = {
												has_province_modifier = secret_aquileian_community
												ROOT = {
													society_member_of = secret_religious_society_aquileian
												}
											}
											
											AND = {
												has_province_modifier = secret_nicene_community
												ROOT = {
													society_member_of = secret_religious_society_nicene
												}
											}
											
											AND = {
												has_province_modifier = secret_total_depravity_community
												ROOT = {
													society_member_of = secret_religious_society_total_depravity
												}
											}
											
											AND = {
												has_province_modifier = secret_eutychian_community
												ROOT = {
													society_member_of = secret_religious_society_eutychian
												}
											}
											
											AND = {
												has_province_modifier = secret_binitarian_community
												ROOT = {
													society_member_of = secret_religious_society_binitarian
												}
											}
											
											AND = {
												has_province_modifier = secret_georgian_orthodox_community
												ROOT = {
													society_member_of = secret_religious_society_georgian_orthodox
												}
											}
											
											AND = {
												has_province_modifier = secret_insular_community
												ROOT = {
													society_member_of = secret_religious_society_insular
												}
											}
											
											AND = {
												has_province_modifier = secret_pelagianism_community
												ROOT = {
													society_member_of = secret_religious_society_pelagianism
												}
											}
											
											AND = {
												has_province_modifier = secret_antinomianism_community
												ROOT = {
													society_member_of = secret_religious_society_antinomianism
												}
											}
											
											AND = {
												has_province_modifier = secret_ebionites_community
												ROOT = {
													society_member_of = secret_religious_society_ebionites
												}
											}
											
											AND = {
												has_province_modifier = secret_marcionism_community
												ROOT = {
													society_member_of = secret_religious_society_marcionism
												}
											}
											
											AND = {
												has_province_modifier = secret_montanist_community
												ROOT = {
													society_member_of = secret_religious_society_montanist
												}
											}
											
											AND = {
												has_province_modifier = secret_sethian_community
												ROOT = {
													society_member_of = secret_religious_society_sethian
												}
											}
											
											AND = {
												has_province_modifier = secret_valentinianism_community
												ROOT = {
													society_member_of = secret_religious_society_valentinianism
												}
											}
											
											AND = {
												has_province_modifier = secret_apollinarian_community
												ROOT = {
													society_member_of = secret_religious_society_apollinarian
												}
											}
											
											AND = {
												has_province_modifier = secret_adoptionism_community
												ROOT = {
													society_member_of = secret_religious_society_adoptionism
												}
											}
											
											AND = {
												has_province_modifier = secret_docetic_community
												ROOT = {
													society_member_of = secret_religious_society_docetic
												}
											}
											
											AND = {
												has_province_modifier = secret_pneumatomachians_community
												ROOT = {
													society_member_of = secret_religious_society_pneumatomachians
												}
											}
											
											AND = {
												has_province_modifier = secret_melchisedechianism_community
												ROOT = {
													society_member_of = secret_religious_society_melchisedechianism
												}
											}
											
											AND = {
												has_province_modifier = secret_patripassianism_community
												ROOT = {
													society_member_of = secret_religious_society_patripassianism
												}
											}
											
											AND = {
												has_province_modifier = secret_sabellianism_community
												ROOT = {
													society_member_of = secret_religious_society_sabellianism
												}
											}
											
											AND = {
												has_province_modifier = secret_psilanthropism_community
												ROOT = {
													society_member_of = secret_religious_society_psilanthropism
												}
											}
											
											AND = {
												has_province_modifier = secret_audianistic_community
												ROOT = {
													society_member_of = secret_religious_society_audianistic
												}
											}
											
											AND = {
												has_province_modifier = secret_arian_community
												ROOT = {
													society_member_of = secret_religious_society_arian
												}
											}
											
											AND = {
												has_province_modifier = secret_monarchianism_community
												ROOT = {
													society_member_of = secret_religious_society_monarchianism
												}
											}
											
											AND = {
												has_province_modifier = secret_donatism_community
												ROOT = {
													society_member_of = secret_religious_society_donatism
												}
											}
											
											AND = {
												has_province_modifier = secret_priscillianism_community
												ROOT = {
													society_member_of = secret_religious_society_priscillianism
												}
											}
											
											AND = {
												has_province_modifier = secret_islamic_community
												ROOT = {
													society_member_of = secret_religious_society_islamic
												}
											}
											
											AND = {
												has_province_modifier = secret_abadites_community
												ROOT = {
													society_member_of = secret_religious_society_abadites
												}
											}
											
											AND = {
												has_province_modifier = secret_quranism_community
												ROOT = {
													society_member_of = secret_religious_society_quranism
												}
											}
											
											AND = {
												has_province_modifier = secret_qadariyya_community
												ROOT = {
													society_member_of = secret_religious_society_qadariyya
												}
											}
											
											AND = {
												has_province_modifier = secret_khawariji_community
												ROOT = {
													society_member_of = secret_religious_society_khawariji
												}
											}
											
											AND = {
												has_province_modifier = secret_haruriyyah_community
												ROOT = {
													society_member_of = secret_religious_society_haruriyyah
												}
											}
											
											AND = {
												has_province_modifier = secret_mahdi_community
												ROOT = {
													society_member_of = secret_religious_society_mahdi
												}
											}
											
											AND = {
												has_province_modifier = secret_twelver_community
												ROOT = {
													society_member_of = secret_religious_society_twelver
												}
											}
											
											AND = {
												has_province_modifier = secret_zayid_community
												ROOT = {
													society_member_of = secret_religious_society_zayid
												}
											}
											
											AND = {
												has_province_modifier = secret_ismaili_community
												ROOT = {
													society_member_of = secret_religious_society_ismaili
												}
											}
											
											AND = {
												has_province_modifier = secret_uwaisi_community
												ROOT = {
													society_member_of = secret_religious_society_uwaisi
												}
											}
											
											AND = {
												has_province_modifier = secret_qarmatian_community
												ROOT = {
													society_member_of = secret_religious_society_qarmatian
												}
											}
											
											AND = {
												has_province_modifier = secret_root_west_pagan_community
												ROOT = {
													society_member_of = secret_religious_society_root_west_pagan
												}
											}
											
											AND = {
												has_province_modifier = secret_root_west_pagan_reformed_community
												ROOT = {
													society_member_of = secret_religious_society_root_west_pagan_reformed
												}
											}
											
											AND = {
												has_province_modifier = secret_sanamahi_community
												ROOT = {
													society_member_of = secret_religious_society_sanamahi
												}
											}
											
											AND = {
												has_province_modifier = secret_sanamahi_reformed_community
												ROOT = {
													society_member_of = secret_religious_society_sanamahi_reformed
												}
											}
											
											AND = {
												has_province_modifier = secret_georgian_pagan_community
												ROOT = {
													society_member_of = secret_religious_society_georgian_pagan
												}
											}
											
											AND = {
												has_province_modifier = secret_illyran_pagan_community
												ROOT = {
													society_member_of = secret_religious_society_illyran_pagan
												}
											}
											
											AND = {
												has_province_modifier = secret_illyran_pagan_reformed_community
												ROOT = {
													society_member_of = secret_religious_society_illyran_pagan_reformed
												}
											}
											
											AND = {
												has_province_modifier = secret_germanic_pagan_community
												ROOT = {
													society_member_of = secret_religious_society_germanic_pagan
												}
											}
											
											AND = {
												has_province_modifier = secret_germanic_pagan_reformed_community
												ROOT = {
													society_member_of = secret_religious_society_germanic_pagan_reformed
												}
											}
											
											AND = {
												has_province_modifier = secret_west_pagan_community
												ROOT = {
													society_member_of = secret_religious_society_west_pagan
												}
											}
											
											AND = {
												has_province_modifier = secret_scythian_pagan_community
												ROOT = {
													society_member_of = secret_religious_society_scythian_pagan
												}
											}
											
											AND = {
												has_province_modifier = secret_scythian_pagan_reformed_community
												ROOT = {
													society_member_of = secret_religious_society_scythian_pagan_reformed
												}
											}
											
											AND = {
												has_province_modifier = secret_semitic_pagan_community
												ROOT = {
													society_member_of = secret_religious_society_semitic_pagan
												}
											}
											
											AND = {
												has_province_modifier = secret_semitic_pagan_reformed_community
												ROOT = {
													society_member_of = secret_religious_society_semitic_pagan_reformed
												}
											}
											
											AND = {
												has_province_modifier = secret_dravidian_pagan_community
												ROOT = {
													society_member_of = secret_religious_society_dravidian_pagan
												}
											}
											
											AND = {
												has_province_modifier = secret_dravidian_pagan_reformed_community
												ROOT = {
													society_member_of = secret_religious_society_dravidian_pagan_reformed
												}
											}
											
											AND = {
												has_province_modifier = secret_central_african_pagan_community
												ROOT = {
													society_member_of = secret_religious_society_central_african_pagan
												}
											}
											
											AND = {
												has_province_modifier = secret_central_african_pagan_reformed_community
												ROOT = {
													society_member_of = secret_religious_society_central_african_pagan_reformed
												}
											}
											
											AND = {
												has_province_modifier = secret_gurzil_pagan_community
												ROOT = {
													society_member_of = secret_religious_society_gurzil_pagan
												}
											}
											
											AND = {
												has_province_modifier = secret_msoura_pagan_community
												ROOT = {
													society_member_of = secret_religious_society_msoura_pagan
												}
											}
											
											AND = {
												has_province_modifier = secret_african_solar_pagan_community
												ROOT = {
													society_member_of = secret_religious_society_african_solar_pagan
												}
											}
											
											AND = {
												has_province_modifier = secret_african_solar_pagan_reformed_community
												ROOT = {
													society_member_of = secret_religious_society_african_solar_pagan_reformed
												}
											}
											
											AND = {
												has_province_modifier = secret_latin_solar_pagan_community
												ROOT = {
													society_member_of = secret_religious_society_latin_solar_pagan
												}
											}
											
											AND = {
												has_province_modifier = secret_latin_solar_pagan_reformed_community
												ROOT = {
													society_member_of = secret_religious_society_latin_solar_pagan_reformed
												}
											}
											
											AND = {
												has_province_modifier = secret_mandulis_pagan_community
												ROOT = {
													society_member_of = secret_religious_society_mandulis_pagan
												}
											}
											
											AND = {
												has_province_modifier = secret_east_african_pagan_community
												ROOT = {
													society_member_of = secret_religious_society_east_african_pagan
												}
											}
											
											AND = {
												has_province_modifier = secret_east_african_pagan_reformed_community
												ROOT = {
													society_member_of = secret_religious_society_east_african_pagan_reformed
												}
											}
											
											AND = {
												has_province_modifier = secret_assyrian_pagan_community
												ROOT = {
													society_member_of = secret_religious_society_assyrian_pagan
												}
											}
											
											AND = {
												has_province_modifier = secret_cybelian_pagan_community
												ROOT = {
													society_member_of = secret_religious_society_cybelian_pagan
												}
											}
											
											AND = {
												has_province_modifier = secret_mastimani_community
												ROOT = {
													society_member_of = secret_religious_society_mastimani
												}
											}
											
											AND = {
												has_province_modifier = secret_neoplatonist_community
												ROOT = {
													society_member_of = secret_religious_society_neoplatonist
												}
											}
											
											AND = {
												has_province_modifier = secret_mithraic_pagan_community
												ROOT = {
													society_member_of = secret_religious_society_mithraic_pagan
												}
											}
											
											AND = {
												has_province_modifier = secret_zurvanist_community
												ROOT = {
													society_member_of = secret_religious_society_zurvanist
												}
											}
											
											AND = {
												has_province_modifier = secret_khurramite_community
												ROOT = {
													society_member_of = secret_religious_society_khurramite
												}
											}
											
											AND = {
												has_province_modifier = secret_hepthal_religion_community
												ROOT = {
													society_member_of = secret_religious_society_hepthal_religion
												}
											}
											
											AND = {
												has_province_modifier = secret_tzadikite_community
												ROOT = {
													society_member_of = secret_religious_society_tzadikite
												}
											}
											
											AND = {
												has_province_modifier = secret_bosporan_faith_community
												ROOT = {
													society_member_of = secret_religious_society_bosporan_faith
												}
											}
											
											AND = {
												has_province_modifier = secret_ajivika_community
												ROOT = {
													society_member_of = secret_religious_society_ajivika
												}
											}
											
											AND = {
												has_province_modifier = secret_carvaka_community
												ROOT = {
													society_member_of = secret_religious_society_carvaka
												}
											}
											
											AND = {
												has_province_modifier = secret_mimamsa_community
												ROOT = {
													society_member_of = secret_religious_society_mimamsa
												}
											}
											
											AND = {
												has_province_modifier = secret_tantric_community
												ROOT = {
													society_member_of = secret_religious_society_tantric
												}
											}
											
											AND = {
												has_province_modifier = secret_bhakti_community
												ROOT = {
													society_member_of = secret_religious_society_bhakti
												}
											}
											
											AND = {
												has_province_modifier = secret_sramanic_community
												ROOT = {
													society_member_of = secret_religious_society_sramanic
												}
											}
											
											AND = {
												has_province_modifier = secret_confucianism_community
												ROOT = {
													society_member_of = secret_religious_society_confucianism
												}
											}
																						
											AND = {
												has_province_modifier = secret_vasconic_pagan_community
												ROOT = {
													society_member_of = secret_religious_society_vasconic_pagan
												}
											}
											
											AND = {
												has_province_modifier = secret_vasconic_pagan_reformed_community
												ROOT = {
													society_member_of = secret_religious_society_vasconic_pagan_reformed
												}
											}
											
											AND = {
												has_province_modifier = secret_dacian_pagan_community
												ROOT = {
													society_member_of = secret_religious_society_dacian_pagan
												}
											}
											
											AND = {
												has_province_modifier = secret_dacian_pagan_reformed_community
												ROOT = {
													society_member_of = secret_religious_society_dacian_pagan_reformed
												}
											}
										
											### Vanilla ###
											AND = {
												has_province_modifier = secret_catholic_community
												ROOT = {
													society_member_of = secret_religious_society_catholic
												}
											}
											
											AND = {
												has_province_modifier = secret_cathar_community
												ROOT = {
													society_member_of = secret_religious_society_cathar
												}
											}
											
											AND = {
												has_province_modifier = secret_fraticelli_community
												ROOT = {
													society_member_of = secret_religious_society_fraticelli
												}
											}
											
											AND = {
												has_province_modifier = secret_waldensian_community
												ROOT = {
													society_member_of = secret_religious_society_waldensian
												}
											}
											
											AND = {
												has_province_modifier = secret_lollard_community
												ROOT = {
													society_member_of = secret_religious_society_lollard
												}
											}
											
											AND = {
												has_province_modifier = secret_orthodox_community
												ROOT = {
													society_member_of = secret_religious_society_orthodox
												}
											}
											
											AND = {
												has_province_modifier = secret_miaphysite_community
												ROOT = {
													society_member_of = secret_religious_society_miaphysite
												}
											}
											
											AND = {
												has_province_modifier = secret_monophysite_community
												ROOT = {
													society_member_of = secret_religious_society_monophysite
												}
											}
											
											AND = {
												has_province_modifier = secret_bogomilist_community
												ROOT = {
													society_member_of = secret_religious_society_bogomilist
												}
											}
											
											AND = {
												has_province_modifier = secret_monothelite_community
												ROOT = {
													society_member_of = secret_religious_society_monothelite
												}
											}
											
											AND = {
												has_province_modifier = secret_iconoclast_community
												ROOT = {
													society_member_of = secret_religious_society_iconoclast
												}
											}
											
											AND = {
												has_province_modifier = secret_paulician_community
												ROOT = {
													society_member_of = secret_religious_society_paulician
												}
											}
											
											AND = {
												has_province_modifier = secret_nestorian_community
												ROOT = {
													society_member_of = secret_religious_society_nestorian
												}
											}
											
											AND = {
												has_province_modifier = secret_messalian_community
												ROOT = {
													society_member_of = secret_religious_society_messalian
												}
											}
											
											AND = {
												has_province_modifier = secret_sunni_community
												ROOT = {
													society_member_of = secret_religious_society_sunni
												}
											}
											
											AND = {
												has_province_modifier = secret_zikri_community
												ROOT = {
													society_member_of = secret_religious_society_zikri
												}
											}
											
											AND = {
												has_province_modifier = secret_yazidi_community
												ROOT = {
													society_member_of = secret_religious_society_yazidi
												}
											}
											
											AND = {
												has_province_modifier = secret_ibadi_community
												ROOT = {
													society_member_of = secret_religious_society_ibadi
												}
											}
											
											AND = {
												has_province_modifier = secret_kharijite_community
												ROOT = {
													society_member_of = secret_religious_society_kharijite
												}
											}
											
											AND = {
												has_province_modifier = secret_shiite_community
												ROOT = {
													society_member_of = secret_religious_society_shiite
												}
											}
											
											AND = {
												has_province_modifier = secret_druze_community
												ROOT = {
													society_member_of = secret_religious_society_druze
												}
											}
											
											AND = {
												has_province_modifier = secret_hurufi_community
												ROOT = {
													society_member_of = secret_religious_society_hurufi
												}
											}
											
											AND = {
												has_province_modifier = secret_jewish_community
												ROOT = {
													society_member_of = secret_religious_society_jewish
												}
											}
											
											AND = {
												has_province_modifier = secret_samaritan_community
												ROOT = {
													society_member_of = secret_religious_society_samaritan
												}
											}
											
											AND = {
												has_province_modifier = secret_karaite_community
												ROOT = {
													society_member_of = secret_religious_society_karaite
												}
											}
											
											AND = {
												has_province_modifier = secret_zoroastrian_community
												ROOT = {
													society_member_of = secret_religious_society_zoroastrian
												}
											}
											
											AND = {
												has_province_modifier = secret_mazdaki_community
												ROOT = {
													society_member_of = secret_religious_society_mazdaki
												}
											}
											
											AND = {
												has_province_modifier = secret_manichean_community
												ROOT = {
													society_member_of = secret_religious_society_manichean
												}
											}
											
											AND = {
												has_province_modifier = secret_khurmazta_community
												ROOT = {
													society_member_of = secret_religious_society_khurmazta
												}
											}
											
											AND = {
												has_province_modifier = secret_bon_community
												ROOT = {
													society_member_of = secret_religious_society_bon
												}
											}
											
											AND = {
												has_province_modifier = secret_taoist_community
												ROOT = {
													society_member_of = secret_religious_society_taoist
												}
											}
											
											AND = {
												has_province_modifier = secret_hindu_community
												ROOT = {
													society_member_of = secret_religious_society_hindu
												}
											}
											
											AND = {
												has_province_modifier = secret_buddhist_community
												ROOT = {
													society_member_of = secret_religious_society_buddhist
												}
											}
											
											AND = {
												has_province_modifier = secret_jain_community
												ROOT = {
													society_member_of = secret_religious_society_jain
												}
											}
											
											AND = {
												has_province_modifier = secret_norse_pagan_reformed_community
												ROOT = {
													society_member_of = secret_religious_society_norse_pagan_reformed
												}
											}
											
											AND = {
												has_province_modifier = secret_norse_pagan_community
												ROOT = {
													society_member_of = secret_religious_society_norse_pagan
												}
											}
											
											AND = {
												has_province_modifier = secret_baltic_pagan_reformed_community
												ROOT = {
													society_member_of = secret_religious_society_baltic_pagan_reformed
												}
											}
											
											AND = {
												has_province_modifier = secret_baltic_pagan_community
												ROOT = {
													society_member_of = secret_religious_society_baltic_pagan
												}
											}
											
											AND = {
												has_province_modifier = secret_finnish_pagan_reformed_community
												ROOT = {
													society_member_of = secret_religious_society_finnish_pagan_reformed
												}
											}
											
											AND = {
												has_province_modifier = secret_finnish_pagan_community
												ROOT = {
													society_member_of = secret_religious_society_finnish_pagan
												}
											}
											
											AND = {
												has_province_modifier = secret_slavic_pagan_reformed_community
												ROOT = {
													society_member_of = secret_religious_society_slavic_pagan_reformed
												}
											}
											
											AND = {
												has_province_modifier = secret_slavic_pagan_community
												ROOT = {
													society_member_of = secret_religious_society_slavic_pagan
												}
											}
											
											AND = {
												has_province_modifier = secret_tengri_pagan_reformed_community
												ROOT = {
													society_member_of = secret_religious_society_tengri_pagan_reformed
												}
											}
											
											AND = {
												has_province_modifier = secret_tengri_pagan_community
												ROOT = {
													society_member_of = secret_religious_society_tengri_pagan
												}
											}
											
											AND = {
												has_province_modifier = secret_west_african_pagan_reformed_community
												ROOT = {
													society_member_of = secret_religious_society_west_african_pagan_reformed
												}
											}
											
											AND = {
												has_province_modifier = secret_west_african_pagan_community
												ROOT = {
													society_member_of = secret_religious_society_west_african_pagan
												}
											}
											
											AND = {
												has_province_modifier = secret_zun_pagan_reformed_community
												ROOT = {
													society_member_of = secret_religious_society_zun_pagan_reformed
												}
											}
											
											AND = {
												has_province_modifier = secret_zun_pagan_community
												ROOT = {
													society_member_of = secret_religious_society_zun_pagan
												}
											}
											
											AND = {
												has_province_modifier = secret_aztec_community
												ROOT = {
													society_member_of = secret_religious_society_aztec
												}
											}
											
											AND = {
												has_province_modifier = secret_aztec_reformed_community
												ROOT = {
													society_member_of = secret_religious_society_aztec_reformed
												}
											}

											### ACR ###
											AND = {
												has_province_modifier = secret_celtic_pagan_community
												ROOT = {
													society_member_of = secret_religious_society_celtic_pagan
												}
											}
											AND = {
												has_province_modifier = secret_celtic_pagan_reformed_community
												ROOT = {
													society_member_of = secret_religious_society_celtic_pagan_reformed
												}
											}
											AND = {
												has_province_modifier = secret_hellenic_pagan_community
												ROOT = {
													society_member_of = secret_religious_society_hellenic_pagan
												}
											}

											AND = {
												has_province_modifier = secret_egyptian_pagan_community
												ROOT = {
													society_member_of = secret_religious_society_egyptian_pagan
												}
											}
											AND = {
												has_province_modifier = secret_aten_pagan_community
												ROOT = {
													society_member_of = secret_religious_society_aten_pagan
												}
											}
										}
									}
								}
								if = {
									limit = { NOT = { has_character_flag = currently_part_of_secret_religion_uncovering } }
									character_event = { id = MNM.3820 } # Flip provinces with local cult modifier
								}
								if = {
									limit = { has_character_flag = currently_part_of_secret_religion_uncovering }
									ROOT = {
										trigger_switch = {
											on_trigger = society_member_of
											secret_religious_society_catholic = {
												PREV = {
													any_demesne_province = {
														limit = {
															has_province_modifier = secret_catholic_community
														}
														religion = catholic
														remove_province_modifier = secret_catholic_community
													}
												}
											}
											secret_religious_society_cathar = {
												PREV = {
													any_demesne_province = {
														limit = {
															has_province_modifier = secret_cathar_community
														}
														religion = cathar
														remove_province_modifier = secret_cathar_community
													}
												}
											}
											secret_religious_society_fraticelli = {
												PREV = {
													any_demesne_province = {
														limit = {
															has_province_modifier = secret_fraticelli_community
														}
														religion = fraticelli
														remove_province_modifier = secret_fraticelli_community
													}
												}
											}
											secret_religious_society_waldensian = {
												PREV = {
													any_demesne_province = {
														limit = {
															has_province_modifier = secret_waldensian_community
														}
														religion = waldensian
														remove_province_modifier = secret_waldensian_community
													}
												}
											}
											secret_religious_society_lollard = {
												PREV = {
													any_demesne_province = {
														limit = {
															has_province_modifier = secret_lollard_community
														}
														religion = lollard
														remove_province_modifier = secret_lollard_community
													}
												}
											}
											secret_religious_society_orthodox = { 
												PREV = {
													any_demesne_province = {
														limit = {
															has_province_modifier = secret_orthodox_community
														}
														religion = orthodox
														remove_province_modifier = secret_orthodox_community
													}
												}
											}
											secret_religious_society_miaphysite = {
												PREV = {
													any_demesne_province = {
														limit = {
															has_province_modifier = secret_miaphysite_community
														}
														religion = miaphysite
														remove_province_modifier = secret_miaphysite_community
													}
												}
											}
											secret_religious_society_monophysite = {
												PREV = {
													any_demesne_province = {
														limit = {
															has_province_modifier = secret_monophysite_community
														}
														religion = monophysite
														remove_province_modifier = secret_monophysite_community
													}
												}
											}
											secret_religious_society_bogomilist = {
												PREV = {
													any_demesne_province = {
														limit = {
															has_province_modifier = secret_bogomilist_community
														}
														religion = bogomilist
														remove_province_modifier = secret_bogomilist_community
													}
												}
											}
											secret_religious_society_monothelite = {
												PREV = {
													any_demesne_province = {
														limit = {
															has_province_modifier = secret_monothelite_community
														}
														religion = monothelite
														remove_province_modifier = secret_monothelite_community
													}
												}
											}
											secret_religious_society_iconoclast = {
												PREV = {
													any_demesne_province = {
														limit = {
															has_province_modifier = secret_iconoclast_community
														}
														religion = iconoclast
														remove_province_modifier = secret_iconoclast_community
													}
												}
											}
											secret_religious_society_paulician = {
												PREV = {
													any_demesne_province = {
														limit = {
															has_province_modifier = secret_paulician_community
														}
														religion = paulician
														remove_province_modifier = secret_paulician_community
													}
												}
											}
											secret_religious_society_nestorian = {
												PREV = {
													any_demesne_province = {
														limit = {
															has_province_modifier = secret_nestorian_community
														}
														religion = nestorian
														remove_province_modifier = secret_nestorian_community
													}
												}
											}
											secret_religious_society_messalian = {
												PREV = {
													any_demesne_province = {
														limit = {
															has_province_modifier = secret_messalian_community
														}
														religion = messalian
														remove_province_modifier = secret_messalian_community
													}
												}
											}
											secret_religious_society_sunni = { 
												PREV = {
													any_demesne_province = {
														limit = {
															has_province_modifier = secret_sunni_community
														}
														religion = sunni
														remove_province_modifier = secret_sunni_community
													}
												}
											}
											secret_religious_society_zikri = {
												PREV = {
													any_demesne_province = {
														limit = {
															has_province_modifier = secret_zikri_community
														}
														religion = zikri
														remove_province_modifier = secret_zikri_community
													}
												}
											}
											secret_religious_society_yazidi = {
												PREV = {
													any_demesne_province = {
														limit = {
															has_province_modifier = secret_yazidi_community
														}
														religion = yazidi
														remove_province_modifier = secret_yazidi_community
													}
												}
											}
											secret_religious_society_ibadi = {
												PREV = {
													any_demesne_province = {
														limit = {
															has_province_modifier = secret_ibadi_community
														}
														religion = ibadi
														remove_province_modifier = secret_ibadi_community
													}
												}
											}
											secret_religious_society_kharijite = {
												PREV = {
													any_demesne_province = {
														limit = {
															has_province_modifier = secret_kharijite_community
														}
														religion = kharijite
														remove_province_modifier = secret_kharijite_community
													}
												}
											}
											secret_religious_society_shiite = { 
												PREV = {
													any_demesne_province = {
														limit = {
															has_province_modifier = secret_shiite_community
														}
														religion = shiite
														remove_province_modifier = secret_shiite_community
													}
												}
											}
											secret_religious_society_druze = {
												PREV = {
													any_demesne_province = {
														limit = {
															has_province_modifier = secret_druze_community
														}
														religion = druze
														remove_province_modifier = secret_druze_community
													}
												}
											}
											secret_religious_society_hurufi = {
												PREV = {
													any_demesne_province = {
														limit = {
															has_province_modifier = secret_hurufi_community
														}
														religion = hurufi
														remove_province_modifier = secret_hurufi_community
													}
												}
											}
											secret_religious_society_aztec = {
												PREV = {
													any_demesne_province = {
														limit = {
															has_province_modifier = secret_aztec_community
														}
														religion = aztec
														remove_province_modifier = secret_aztec_community
													}
												}
											}
											secret_religious_society_aztec_reformed = {
												PREV = {
													any_demesne_province = {
														limit = {
															has_province_modifier = secret_aztec_reformed_community
														}
														religion = aztec_reformed
														remove_province_modifier = secret_aztec_reformed_community
													}
												}
											}
											secret_religious_society_jewish = { 
												PREV = {
													any_demesne_province = {
														limit = {
															has_province_modifier = secret_jewish_community
														}
														religion = jewish
														remove_province_modifier = secret_jewish_community
													}
												}
											}
											secret_religious_society_samaritan = {
												PREV = {
													any_demesne_province = {
														limit = {
															has_province_modifier = secret_samaritan_community
														}
														religion = samaritan
														remove_province_modifier = secret_samaritan_community
													}
												}
											}
											secret_religious_society_karaite = {
												PREV = {
													any_demesne_province = {
														limit = {
															has_province_modifier = secret_karaite_community
														}
														religion = karaite
														remove_province_modifier = secret_karaite_community
													}
												}
											}
											secret_religious_society_zoroastrian = { 
												PREV = {
													any_demesne_province = {
														limit = {
															has_province_modifier = secret_zoroastrian_community
														}
														religion = zoroastrian
														remove_province_modifier = secret_zoroastrian_community
													}
												}
											}
											secret_religious_society_mazdaki = {
												PREV = {
													any_demesne_province = {
														limit = {
															has_province_modifier = secret_mazdaki_community
														}
														religion = mazdaki
														remove_province_modifier = secret_mazdaki_community
													}
												}
											}
											secret_religious_society_manichean = {
												PREV = {
													any_demesne_province = {
														limit = {
															has_province_modifier = secret_manichean_community
														}
														religion = manichean
														remove_province_modifier = secret_manichean_community
													}
												}
											}
											secret_religious_society_khurmazta = {
												PREV = {
													any_demesne_province = {
														limit = {
															has_province_modifier = secret_khurmazta_community
														}
														religion = khurmazta
														remove_province_modifier = secret_khurmazta_community
													}
												}
											}
											secret_religious_society_bon = {
												PREV = {
													any_demesne_province = {
														limit = {
															has_province_modifier = secret_bon_community
														}
														religion = bon
														remove_province_modifier = secret_bon_community
													}
												}
											}
											secret_religious_society_bon_reformed = {
												PREV = {
													any_demesne_province = {
														limit = {
															has_province_modifier = secret_bon_reformed_community
														}
														religion = bon_reformed
														remove_province_modifier = secret_bon_reformed_community
													}
												}
											}
											secret_religious_society_hellenic_pagan = {
												PREV = {
													any_demesne_province = {
														limit = {
															has_province_modifier = secret_hellenic_pagan_community
														}
														religion = hellenic_pagan
														remove_province_modifier = secret_hellenic_pagan_community
													}
												}
											}										
											secret_religious_society_taoist = {
												PREV = {
													any_demesne_province = {
														limit = {
															has_province_modifier = secret_taoist_community
														}
														religion = taoist
														remove_province_modifier = secret_taoist_community
													}
												}
											}
											secret_religious_society_hindu = { 
												PREV = {
													any_demesne_province = {
														limit = {
															has_province_modifier = secret_hindu_community
														}
														religion = hindu
														remove_province_modifier = secret_hindu_community
													}
												}
											}
											secret_religious_society_buddhist = { 
												PREV = {
													any_demesne_province = {
														limit = {
															has_province_modifier = secret_buddhist_community
														}
														religion = buddhist
														remove_province_modifier = secret_buddhist_community
													}
												}
											}
											secret_religious_society_jain = { 
												PREV = {
													any_demesne_province = {
														limit = {
															has_province_modifier = secret_jain_community
														}
														religion = jain
														remove_province_modifier = secret_jain_community
													}
												}
											}
											secret_religious_society_norse_pagan_reformed = { 
												PREV = {
													any_demesne_province = {
														limit = {
															has_province_modifier = secret_norse_pagan_reformed_community
														}
														religion = norse_pagan_reformed
														remove_province_modifier = secret_norse_pagan_reformed_community
													}
												}
											}
											secret_religious_society_norse_pagan = { 
												PREV = {
													any_demesne_province = {
														limit = {
															has_province_modifier = secret_norse_pagan_community
														}
														religion = norse_pagan
														remove_province_modifier = secret_norse_pagan_community
													}
												}
											}
											secret_religious_society_slavic_pagan_reformed = { 
												PREV = {
													any_demesne_province = {
														limit = {
															has_province_modifier = secret_slavic_pagan_reformed_community
														}
														religion = slavic_pagan_reformed
														remove_province_modifier = secret_slavic_pagan_reformed_community
													}
												}
											}
											secret_religious_society_slavic_pagan = { 
												PREV = {
													any_demesne_province = {
														limit = {
															has_province_modifier = secret_slavic_pagan_community
														}
														religion = slavic_pagan
														remove_province_modifier = secret_slavic_pagan_community
													}
												}
											}
											secret_religious_society_tengri_pagan_reformed = {
												PREV = {
													any_demesne_province = {
														limit = {
															has_province_modifier = secret_tengri_pagan_reformed_community
														}
														religion = tengri_pagan_reformed
														remove_province_modifier = secret_tengri_pagan_reformed_community
													}
												}
											}
											secret_religious_society_tengri_pagan = {
												PREV = {
													any_demesne_province = {
														limit = {
															has_province_modifier = secret_tengri_pagan_community
														}
														religion = tengri_pagan
														remove_province_modifier = secret_tengri_pagan_community
													}
												}
											}
											secret_religious_society_baltic_pagan_reformed = { 
												PREV = {
													any_demesne_province = {
														limit = {
															has_province_modifier = secret_baltic_pagan_reformed_community
														}
														religion = baltic_pagan_reformed
														remove_province_modifier = secret_baltic_pagan_reformed_community
													}
												}
											}
											secret_religious_society_baltic_pagan = { 
												PREV = {
													any_demesne_province = {
														limit = {
															has_province_modifier = secret_baltic_pagan_community
														}
														religion = baltic_pagan
														remove_province_modifier = secret_baltic_pagan_community
													}
												}
											}
											secret_religious_society_finnish_pagan_reformed = { 
												PREV = {
													any_demesne_province = {
														limit = {
															has_province_modifier = secret_finnish_pagan_reformed_community
														}
														religion = finnish_pagan_reformed
														remove_province_modifier = secret_finnish_pagan_reformed_community
													}
												}
											}
											secret_religious_society_finnish_pagan = { 
												PREV = {
													any_demesne_province = {
														limit = {
															has_province_modifier = secret_finnish_pagan_community
														}
														religion = finnish_pagan
														remove_province_modifier = secret_finnish_pagan_community
													}
												}
											}
											secret_religious_society_west_african_pagan_reformed = { 
												PREV = {
													any_demesne_province = {
														limit = {
															has_province_modifier = secret_west_african_pagan_reformed_community
														}
														religion = west_african_pagan_reformed
														remove_province_modifier = secret_west_african_pagan_reformed_community
													}
												}
											}
											secret_religious_society_west_african_pagan = { 
												PREV = {
													any_demesne_province = {
														limit = {
															has_province_modifier = secret_west_african_pagan_community
														}
														religion = west_african_pagan
														remove_province_modifier = secret_west_african_pagan_community
													}
												}
											}
											secret_religious_society_zun_pagan_reformed = { 
												PREV = {
													any_demesne_province = {
														limit = {
															has_province_modifier = secret_zun_pagan_reformed_community
														}
														religion = zun_pagan_reformed 
														remove_province_modifier = secret_zun_pagan_reformed_community
													}
												}
											} 
											secret_religious_society_zun_pagan = { 
												PREV = {
													any_demesne_province = {
														limit = {
															has_province_modifier = secret_zun_pagan_community
														}
														religion = zun_pagan 
														remove_province_modifier = secret_zun_pagan_community
													}
												}
											}

											### ACR ###
											secret_religious_society_celtic_pagan = {
												PREV = {
													any_demesne_province = {
														limit = {
															has_province_modifier = secret_celtic_pagan_community
														}
														religion = celtic_pagan
														remove_province_modifier = secret_celtic_pagan_community
													}
												}
											}
											secret_religious_society_celtic_pagan_reformed = {
												PREV = {
													any_demesne_province = {
														limit = {
															has_province_modifier = secret_celtic_pagan_reformed_community
														}
														religion = celtic_pagan_reformed
														remove_province_modifier = secret_celtic_pagan_reformed_community
													}
												}
											}
											secret_religious_society_hellenic_pagan = {
												PREV = {
													any_demesne_province = {
														limit = {
															has_province_modifier = secret_hellenic_pagan_community
														}
														religion = hellenic_pagan
														remove_province_modifier = secret_hellenic_pagan_community
													}
												}
											}
											secret_religious_society_egyptian_pagan = {
												PREV = {
													any_demesne_province = {
														limit = {
															has_province_modifier = secret_egyptian_pagan_community
														}
														religion = egyptian_pagan
														remove_province_modifier = secret_egyptian_pagan_community
													}
												}
											}
											secret_religious_society_aten_pagan = {
												PREV = {
													any_demesne_province = {
														limit = {
															has_province_modifier = secret_aten_pagan_community
														}
														religion = aten_pagan
														remove_province_modifier = secret_aten_pagan_community
													}
												}
											}
										}
									}
								}
							}
						}
					}
					flip_secret_religious_community_provinces = yes
					flip_to_secret_religion_effect = yes
					
					top_liege = {
						any_realm_lord = {
							character_event = { id = MNM.3830 } # Inform lieges unless they're part of the cult flipping, save a flag on previous events.
						}
						
						any_realm_character = {
							limit = {
								NOT = {
									character = ROOT
								}
								same_society_as = ROOT
							}
							leave_society = yes
						}
						
						any_realm_character = {
							limit = {
								has_character_flag = currently_part_of_secret_religion_uncovering
							}
							clr_character_flag = currently_part_of_secret_religion_uncovering
						}
					}
					any_society_member = {
						limit = {
							NOT = {
								character = ROOT
							}
							same_society_as = ROOT
						}
						leave_society = yes
					}
					leave_society = yes
				}
			}
		}
		
		
		
		ai_will_do = {
			factor = 1
			modifier = {
				factor = 0.1 # Slow down
			}
			modifier = {
				factor = 0.1
				is_landed = no
			}
			modifier = {
				factor = 0
				prisoner = yes
			}
			modifier = {
				factor = 0.001
				any_society_member = {
					NOT = { character = ROOT }
					same_realm = ROOT
					ai = no
				}
				NOT = {
					top_liege = {
						OR = {
							same_society_as = ROOT
							is_openly_of_roots_secret_religion_trigger = yes
						}
					}
				}
			}
			modifier = {
				factor = 0
				top_liege = {
					war = yes
				}
			}
			modifier = { #Don't do it unless you are confident in support
				factor = 0
				NOR = {
					AND = { # The Top Liege is in the Secret Cult, and at least 3 of the Liege's direct vassals are also members
						top_liege = {
							OR = {
								same_society_as = ROOT
								is_openly_of_roots_secret_religion_trigger = yes
							}
						}
						top_liege = {
							any_vassal = {
								count = 3
								higher_tier_than = BARON
								prisoner = no
								OR = {
									same_society_as = ROOT
									is_openly_of_roots_secret_religion_trigger = yes
								}
							}
						}
					}
					top_liege = { # At least 5 direct vassals of the Top Liege is in the Secret Cult
						any_vassal = {
							count = 5
							higher_tier_than = BARON
							prisoner = no
							OR = {
								same_society_as = ROOT
								is_openly_of_roots_secret_religion_trigger = yes
							}
						}
					}
					top_liege = { # All direct vassals of the Top Liege are in the Secret Cult
						NOT = {
							any_vassal = {
								higher_tier_than = BARON
								NOR = {
									same_society_as = ROOT
									is_openly_of_roots_secret_religion_trigger = yes
								}
							}
						}
					}
					top_liege = {
						realm_character_percent = {
							target = 0.30
							OR = {
								same_society_as = ROOT
								is_openly_of_prevs_secret_religion_trigger = yes
							}
						}
					}
					AND = {
						top_liege = {
							realm_character_percent = {
								target = 0.25
								OR = {
									same_society_as = ROOT
									is_openly_of_prevs_secret_religion_trigger = yes
								}
							}
						}
						liege = {
							OR = {
								same_society_as = ROOT
								is_openly_of_prevs_secret_religion_trigger = yes
							}
						}
					}
					AND = {
						top_liege = {
							realm_character_percent = {
								target = 0.20
								OR = {
									same_society_as = ROOT
									is_openly_of_prevs_secret_religion_trigger = yes
								}
							}
						}
						top_liege = {
							OR = {
								same_society_as = ROOT
								is_openly_of_prevs_secret_religion_trigger = yes
							}
						}
						liege = {
							OR = {
								same_society_as = ROOT
								is_openly_of_prevs_secret_religion_trigger = yes
							}
						}
					}
					AND = {
						top_liege = {
							realm_character_percent = {
								target = 0.15
								OR = {
									same_society_as = ROOT
									is_openly_of_prevs_secret_religion_trigger = yes
								}
							}
						}
						any_vassal = {
							OR = {
								same_society_as = ROOT
								is_openly_of_prevs_secret_religion_trigger = yes
							}
						}
						top_liege = {
							OR = {
								same_society_as = ROOT
								is_openly_of_prevs_secret_religion_trigger = yes
							}
						}
						liege = {
							OR = {
								same_society_as = ROOT
								is_openly_of_prevs_secret_religion_trigger = yes
							}
						}
					}
				}
			}
			modifier = {
				factor = 1.5
				trait = ambitious
			}
			modifier = {
				factor = 1.5
				realm_character_percent = {
					target = 0.15
					OR = {
						same_society_as = ROOT
						is_openly_of_prevs_secret_religion_trigger = yes
					}
				}				
			}
			modifier = {
				factor = 1.5
				realm_character_percent = {
					target = 0.25
					OR = {
						same_society_as = ROOT
						is_openly_of_prevs_secret_religion_trigger = yes
					}
				}				
			}
			modifier = {
				factor = 1.5
				realm_character_percent = {
					target = 0.35
					OR = {
						same_society_as = ROOT
						is_openly_of_prevs_secret_religion_trigger = yes
					}
				}				
			}
			modifier = {
				factor = 1.5
				realm_character_percent = {
					target = 0.5
					OR = {
						same_society_as = ROOT
						is_openly_of_prevs_secret_religion_trigger = yes
					}
				}				
			}
			modifier = {
				factor = 1.5
				realm_character_percent = {
					target = 0.65
					OR = {
						same_society_as = ROOT
						is_openly_of_prevs_secret_religion_trigger = yes
					}
				}				
			}
		}
	}

	secret_religions_blend_in = {
		
		potential = {
			society_member_of = secret_religious_cult
			has_quest = quest_secret_religions_societies_blend_in
			NOT = { has_character_modifier = attempting_to_blend_in }
		}
		allow = {
			has_quest = quest_secret_religions_societies_blend_in
			prisoner = no
			NOT = { trait = incapable }
			NOT = { is_inaccessible_trigger = yes }
			custom_tooltip = {
				text = quest_secret_religions_societies_blend_in_allow_tt
				OR = {
					NOT = { has_character_flag = blending_in_timer }
					had_character_flag = { flag = blending_in_timer days = 1000 }
				}
			}
		}

		effect = {
			add_character_modifier = {
				name = attempting_to_blend_in
				duration = -1
			}
			hidden_effect = { character_event = { id = MNM.3399 } }
		}

		
		
		ai_will_do = {
			factor = 0.1

			modifier = {
				factor = 0.01
				war = yes
			}
			modifier = {
				factor = 2
				OR = {
					trait = gregarious
					trait = socializer
				}
			}
			modifier = {
				factor = 0.1
				trait = shy
			}
			modifier = {
				factor = 0.1
				is_dumb_trigger = yes
			}
		}
	}
}

targeted_decisions = {
	secret_religions_conduct_secret_ceremony = {
		is_in_society = yes
		
		filter = self
		ai_target_filter = self
		
		potential = {
			society_member_of = secret_religious_cult
			has_quest = quest_secret_religions_conduct_secret_ceremony 
		}
		allow = {
			has_quest = quest_secret_religions_conduct_secret_ceremony
			prisoner = no
			NOT = { trait = incapable }
			NOT = { is_inaccessible_trigger = yes }
			custom_tooltip = {
				text = quest_secret_religions_conduct_secret_ceremony_allow_tt
				OR = {
					NOT = { has_character_flag = conduct_secret_ceremony_timer }
					had_character_flag = { flag = conduct_secret_ceremony_timer days = 1000 }
				}
			}
		}

		effect = {
			set_character_flag = conduct_secret_ceremony_timer
			hidden_effect = { character_event = { id = MNM.3235 days = 5 } }
		}

		
		
		ai_will_do = {
			factor = 0.1
			modifier = {
				is_ruler = yes
				factor = 10
			}
			modifier = {
				diplomacy = 12
    			factor = 3
			}
			modifier = {
				diplomacy = 15
    			factor = 3
			}
			modifier = {
				trait = paranoid
    			factor = 0.1
			}
			modifier = {
				trait = craven
    			factor = 0.1
			}
		}
	}
	
	secret_religions_induct_child = {
		is_in_society = yes
		
		ai_target_filter = home_court

		from_potential = {
			society_member_of = secret_religious_cult
		}

		potential = {
			NOT = {
				character = FROM
			}
			OR = {
				mother = { character = FROM }
				father = { character = FROM }
				educator = { character = FROM }
				guardian = { character = FROM }
			}
			has_secret_religion_trait_trigger = no
			FROM = { ROOT = { is_openly_of_prevs_secret_religion_trigger = no } }
			is_adult = no
		}

		allow = {
			FROM = {
				prisoner = no
				is_inaccessible_trigger = no
				NOT = { trait = incapable }
			}
			age = 8
			prisoner = no
			NOT = { trait = incapable }
			NOT = { is_inaccessible_trigger = yes }
			custom_tooltip = {
				text = secret_religions_induct_child_allow_tt
				FROM = { shares_prevs_secret_religion_trigger = no }
			}
			custom_tooltip = {
				text = secret_religions_induct_character_cd_tt
				NOT = { has_character_modifier = secret_religions_induct_child_timer }
			}
		}

		effect = {
			custom_tooltip = {
				text = secret_religions_induct_child_effect

				FROM = { character_event = { id = MNM.3438 } }

				hidden_effect = {
					add_character_modifier = {
						name = secret_religions_induct_child_timer
						years = 6
						hidden = yes
					}
				}
			}
			FROM = { 
				if = { 
					limit = {
						is_society_grandmaster = yes
					}
					increase_visibility_minor_effect = yes
				}
				if = {
					limit = {
						NOT = { is_society_grandmaster = yes }
					}
					increase_visibility_effect = yes
				}
			}
		}

		
		
		ai_will_do = {
			factor = 1
			modifier = {
				FROM = { has_quest = quest_secret_religious_soceities_induct_ruler }
    			is_quest_target_of = FROM
    			factor = 100
			}
			modifier = {
				FROM = { has_quest = quest_secret_religious_soceities_induct_ruler }
    			NOT = {
					is_quest_target_of = FROM
				}
    			factor = 0.01
			}
			modifier = {
				OR = {
					mother = { character = FROM }
					father = { character = FROM }
				}
				factor = 10
			}
			modifier = {
				FROM = { current_heir = { character = ROOT } }
				factor = 10
			}
			modifier = {
				is_friend = FROM
				factor = 10
			}
			modifier = {
				trait = trusting
				factor = 5
			}
			modifier = {
				ai = no
				factor = 5
			}
			modifier = {
				OR = {
					mother = { ai = no }
					father = { ai = no }
				}
				factor = 0.1
			}			
		}
	}
	
	secret_religions_recruit = {
		is_in_society = yes
		
		filter = realm 
		ai_target_filter = realm

		from_potential = {
			society_member_of = secret_religious_cult
			is_adult = yes
			prisoner = no
			NOT = { trait = incapable }
			NOT = { is_inaccessible_trigger = yes }
			OR = { # Performance saving measures
				has_society_currency_tiny_trigger = yes
				ai = no
			}
			OR = {
				ai = no
				is_society_grandmaster = yes
				num_of_society_members < 90
			}
		}

		potential = {
			OR = {
				FROM = { ai = no } #Either a player is using the decision, OR the target is interested in the AI's secret religious cult
				ai = yes # Or the target is an AI...
				AND = {
					ai = no
					is_in_society = no
					interested_in_society_of_character = FROM
				}
			}
			
			FROM = {
				OR = {
					ai = yes
					same_realm = PREV
				}
				secret_religion = PREV
			}
			
			is_adult = yes
			NOT = {
				character = FROM
				society = {
					FROM = {
						society = {
							society_type = prevprev
						}
					}
				}
			}

			#Can't invite someone who recently left due to fear of persecution
			OR = {
				had_character_flag = { flag = ancrel_left_secret_society days = 1825 }
				NOT = { has_character_flag = ancrel_left_secret_society }
			}

			#AI can't invite when the society is full
			NAND = {
				ai = yes
				FROM = { ai = yes }
				NOT = {
					FROM = {
						society = {
							ROOT = {
								can_join_society = PREV
							}
						}
					}
				}
			}
		}

		allow = {
			FROM = {
				NOT = {
					has_character_modifier = accused_apostate
				}			
				prisoner = no
				is_inaccessible_trigger = no
				NOT = { trait = incapable }
			}
			prisoner = no
			NOT = { trait = incapable }
			NOT = { is_inaccessible_trigger = yes }
			custom_tooltip = {
				text = secret_religions_recruit_allow_tt
				FROM = { shares_prevs_secret_religion_trigger = yes }
			}
			custom_tooltip = {
				text = secret_religions_recruit_cd_tt
				NOT = { has_character_modifier = secret_religions_recruitment_timer }
			}
		}

		effect = {
			custom_tooltip = { 	
				text = secret_religions_recruit_effect_tt
				FROM = { save_event_target_as = secret_religion_recruiter } 
				character_event = { id = MNM.3420 }

				add_character_modifier = {
					name = secret_religions_recruitment_timer
					years = 10
					hidden = yes
				}
			}
			FROM = { 
				if = { 
					limit = {
						is_society_grandmaster = yes
					}
					increase_visibility_minor_effect = yes
				}
				if = {
					limit = {
						NOT = { is_society_grandmaster = yes }
					}
					increase_visibility_effect = yes
				}
			}
		}

		
		
		ai_will_do = {
			factor = 1
			modifier = {
				is_ruler = yes
				factor = 10
			}
			modifier = {
				ai = no
				factor = 5
			}
			modifier = {
				diplomacy = 12
    			factor = 3
			}
			modifier = {
				diplomacy = 15
    			factor = 3
			}
			modifier = {
				trait = paranoid
    			factor = 0.1
			}
			modifier = {
				trait = craven
    			factor = 0.1
			}
			modifier = {
				factor = 0 # don't recruit characters interested in something else
				NOT = { interested_in_society = secret_religious_cult }
				is_interested_in_any_society = yes
			}
			modifier = {
				NOT = {
					any_realm_character = {
						ai = no
					}
				}
    			factor = 0.1
			}
		}
	}

	secret_religions_induct_character = {
		is_in_society = yes
		
		filter = realm
		ai_target_filter = realm
		
		from_potential = {
			society_member_of = secret_religious_cult
			society_rank >= 2
		}
		
		potential = {
			NOT = {
				character = FROM
			}
			is_adult = yes
			FROM = { 
				ROOT = { 
					NOT = {
						secret_religion = PREV
					}
					is_openly_of_prevs_secret_religion_trigger = no
				} 
			}
			FROM = { 
				ROOT = { 
					OR = {
						has_sympathy_for_true_religion_of_prev_trigger = yes
						is_openly_of_prevs_true_religion_group = yes 
					}
				}
			}
		}

		allow = {
			NOT = {
				has_character_modifier = accused_apostate
			}
			FROM = {
				prisoner = no
				is_inaccessible_trigger = no
				NOT = { trait = incapable }
			}
			prisoner = no
			NOT = { trait = incapable }
			NOT = { is_inaccessible_trigger = yes }
			custom_tooltip = {
				text = secret_religions_induct_character_cd_tt
				OR = {
					NOT = { has_character_modifier = secret_religion_induction_timer }
					has_quest = quest_secret_religious_soceities_induct_ruler
				}
			}
			OR = {
				AND = {
					is_ruler = no
					FROM = { has_society_currency_tiny_trigger = yes }
				}
				hidden_tooltip = {
					FROM = {
						has_society_currency_tiny_trigger = yes
						ai = yes
						is_society_grandmaster = yes
					}
				}
				AND = {
					is_ruler = yes
					FROM = { has_society_currency_minor_trigger = yes }
				}
			}
		}

		effect = {
			if = {
				limit = { 
					is_ruler = no  
					hidden_tooltip = {
						FROM = {
							NAND = {
								ai = yes
								is_society_grandmaster = yes
							}
						}
					}
				}
				FROM = { detract_society_currency_tiny_effect = yes }
			}
			if = {
				limit = {
					FROM = {
						ai = yes
						is_society_grandmaster = yes
					}
				}
				FROM = { detract_society_currency_tiny_effect = yes }
			}
			if = {
				limit = {
					is_ruler = yes
					hidden_tooltip = {
						FROM = {
							NAND = {
								ai = yes
								is_society_grandmaster = yes
							}
						}
					}
				}
				FROM = { detract_society_currency_minor_effect = yes }
			}

			hidden_effect = {
				add_character_modifier = {
					name = secret_religion_induction_timer
					years = 10
					hidden = yes
				}
			}

			custom_tooltip = {
				text = secret_religions_induct_character_effect_tt
				FROM = { character_event = { id = MNM.3408 days = 10 } }
			}
			FROM = {
				if = {
					limit = {
						is_society_grandmaster = yes
					}
					increase_visibility_minor_effect = yes
				}
				if = {
					limit = {
						NOT = { is_society_grandmaster = yes }
					}
					increase_visibility_effect = yes
				}
			}
		}
		
		ai_will_do = {
			factor = 1
			modifier = {
				FROM = { has_quest = quest_secret_religious_soceities_induct_ruler }
    			is_quest_target_of = FROM
    			factor = 100
			}
			modifier = {
				FROM = { has_quest = quest_secret_religious_soceities_induct_ruler }
				NOT = {
					is_quest_target_of = FROM
				}
				factor = 0.01 #to save targets for missions
			}
			modifier = {
				NOT = {
					is_society_grandmaster = yes
				}
				factor = 0.1
			}
			modifier = {
				ai = no
				factor = 5
			}
			modifier = {
				is_ruler = yes
				factor = 10
			}
			modifier = {
				is_close_relative = FROM
				factor = 10
			}
			modifier = {
				is_lover = FROM
				factor = 10
			}
			modifier = {
				is_friend = FROM
				factor = 10
			}
			modifier = {
				trait = trusting
				factor = 5
			}
			modifier = {
				ai = no
				factor = 5
			}
			modifier = {
				NOT = {
					any_realm_character = {
						ai = no
					}
				}
    			factor = 0.01
			}
		}
	}
	
	secret_religions_evoke_sympathy = {
		is_in_society = yes
		
		filter = realm 
		ai_target_filter = realm

		from_potential = {
			society_member_of = secret_religious_cult
		}

		potential = {
			same_realm = FROM
			is_adult = yes
			NOT = { same_society_as = FROM }
			FROM = { 
				ROOT = { 
					has_sympathy_for_true_religion_of_prev_trigger = no
					is_openly_of_prevs_true_religion_group = no
					shares_prevs_secret_religion_trigger = no
				}
			}
			NOT = { 
				character = FROM
				society = {
					FROM = {
						society = {
							society_type = PREVPREV
						}
					}
				}
			}
		}

		allow = {
			NOT = {
				has_character_modifier = accused_apostate
			}
			FROM = {
				prisoner = no
				is_inaccessible_trigger = no
				NOT = { trait = incapable }
			}
			prisoner = no
			NOT = { trait = incapable }
			NOT = { is_inaccessible_trigger = yes }
			custom_tooltip = {
				text = secret_religions_evoke_sympathy_cd_tt
				OR = {
					NOT = { has_character_modifier = secret_religion_sympathy_timer }
					AND = {
						FROM = {
							has_quest = quest_secret_religious_societies_sympathy_ruler
							ROOT = { is_quest_target_of = FROM }
						}
					}
				}
			}
			FROM = {
				OR = {
					custom_tooltip = {
						text = evoke_sympathy_of_tt
						has_quest = quest_secret_religious_societies_sympathy_ruler
						ROOT = { is_quest_target_of = FROM }
					}
					has_society_currency_tiny_trigger = yes
				}
			}
		}

		effect = {
			if = {
				limit = {
					NOT = {
						AND = {
							FROM = { has_quest = quest_secret_religious_societies_sympathy_ruler }
							ROOT = { is_quest_target_of = FROM }
						}
					}
				}
				FROM = { detract_society_currency_tiny_effect = yes }
			}

			hidden_effect = {
				add_character_modifier = {
					name = secret_religion_sympathy_timer
					years = 10
					hidden = yes
				}
			}

			custom_tooltip = {
				text = secret_religions_evoke_sympathy_tt
				FROM = { character_event = { id = MNM.3404 days = 7 } }
			}
			FROM = {
				if = {
					limit = {
						NOT = { is_society_grandmaster = yes }
					}
					increase_visibility_minor_effect = yes
				}
			}
		}

		
		
		ai_will_do = {
			factor = 1
			modifier = {
				FROM = { has_quest = quest_secret_religious_soceities_sympathy_ruler }
    			is_quest_target_of = FROM
    			factor = 100
			}
			modifier = {
				FROM = { has_quest = quest_secret_religious_soceities_sympathy_ruler }
				NOT = {
					is_quest_target_of = FROM
				}
				factor = 0.01 #to save targets for missions
			}
			modifier = {
				FROM = { has_quest = quest_secret_religious_soceities_induct_ruler } #to complete this mission, sympathy is needed first
    			is_quest_target_of = FROM
    			factor = 100
			}
			modifier = {
				FROM = { has_quest = quest_secret_religious_soceities_induct_ruler }
    			NOT = {
					is_quest_target_of = FROM
				}
    			factor = 0.01
			}
			modifier = {
				NOT = {
					is_society_grandmaster = yes
				}
				factor = 0.1
			}
			modifier = {
				is_ruler = yes
				factor = 3
			}
			modifier = {
				trait = zealous
				factor = 0.0001
			}
			modifier = {
				is_close_relative = FROM
				factor = 10
			}
			modifier = {
				is_lover = FROM
				factor = 10
			}
			modifier = {
				is_friend = FROM
				factor = 10
			}
			modifier = {
				trait = kind
				factor = 5
			}
			modifier = {
				trait = trusting
				factor = 5
			}
			modifier = {
				ai = no
				factor = 5
			}
		}
	}
	
	secret_religions_renounce_secret_religion = {
		only_playable = yes
		
		filter = self
		ai_target_filter = self
		
		potential = {
			character = FROM
			has_secret_religion = yes
		}
		
		allow = {
			NOT = { trait = incapable }
		}
		
		effect = {
			if = {
				limit = {
					society_member_of = secret_religious_cult
					is_society_grandmaster = yes
				}
				leave_society = yes
			}
			if = {
				limit = {
					capital_scope = {
						NOT = { true_religion_group = ROOT }
					}
				}
				prestige = -1000
			}
			if = {
				limit = {
					capital_scope = {
						true_religion_group = ROOT
						NOT = { true_religion = ROOT }
					}
				}
				prestige = -500
			}
			piety = 250
			true_religion_scope = {
				show_scope_change = no
				religion_authority = {
					modifier = ruler_converted_from
				}
			}
			clear_secret_religion = yes
		}
		
		revoke_allowed = {
			always = no
		}
		
		ai_will_do = {
			factor = 0
		}
	}
	
	secret_religions_personally_adopt_secret_religion = {
		only_playable = yes
		
		filter = self
		ai_target_filter = self
		
		potential = {
			character = FROM
			has_secret_religion = yes
		}
		
		allow = {
			NOT = { trait = incapable }
			ROOTs_secret_religion_is_playable_trigger = yes
		}
		
		effect = {
			flip_to_secret_religion_effect = yes
			trigger_switch = {
				on_trigger = religion
				
				### WtWSMS ###
				aquileian = {
					any_demesne_province = {
						limit = { has_province_modifier = secret_aquileian_community } religion = aquileian
					}
				}
				nicene = {
					any_demesne_province = {
						limit = { has_province_modifier = secret_nicene_community } religion = nicene
					}
				}
				total_depravity = {
					any_demesne_province = {
						limit = { has_province_modifier = secret_total_depravity_community } religion = total_depravity
					}
				}
				eutychian = {
					any_demesne_province = {
						limit = { has_province_modifier = secret_eutychian_community } religion = eutychian
					}
				}
				binitarian = {
					any_demesne_province = {
						limit = { has_province_modifier = secret_binitarian_community } religion = binitarian
					}
				}
				georgian_orthodox = {
					any_demesne_province = {
						limit = { has_province_modifier = secret_georgian_orthodox_community } religion = georgian_orthodox
					}
				}
				insular = {
					any_demesne_province = {
						limit = { has_province_modifier = secret_insular_community } religion = insular
					}
				}
				pelagianism = {
					any_demesne_province = {
						limit = { has_province_modifier = secret_pelagianism_community } religion = pelagianism
					}
				}
				antinomianism = {
					any_demesne_province = {
						limit = { has_province_modifier = secret_antinomianism_community } religion = antinomianism
					}
				}
				ebionites = {
					any_demesne_province = {
						limit = { has_province_modifier = secret_ebionites_community } religion = ebionites
					}
				}
				marcionism = {
					any_demesne_province = {
						limit = { has_province_modifier = secret_marcionism_community } religion = marcionism
					}
				}
				montanist = {
					any_demesne_province = {
						limit = { has_province_modifier = secret_montanist_community } religion = montanist
					}
				}
				sethian = {
					any_demesne_province = {
						limit = { has_province_modifier = secret_sethian_community } religion = sethian
					}
				}
				valentinianism = {
					any_demesne_province = {
						limit = { has_province_modifier = secret_valentinianism_community } religion = valentinianism
					}
				}
				apollinarian = {
					any_demesne_province = {
						limit = { has_province_modifier = secret_apollinarian_community } religion = apollinarian
					}
				}
				adoptionism = {
					any_demesne_province = {
						limit = { has_province_modifier = secret_adoptionism_community } religion = adoptionism
					}
				}
				docetic = {
					any_demesne_province = {
						limit = { has_province_modifier = secret_docetic_community } religion = docetic
					}
				}
				pneumatomachians = {
					any_demesne_province = {
						limit = { has_province_modifier = secret_pneumatomachians_community } religion = pneumatomachians
					}
				}
				melchisedechianism = {
					any_demesne_province = {
						limit = { has_province_modifier = secret_melchisedechianism_community } religion = melchisedechianism
					}
				}
				patripassianism = {
					any_demesne_province = {
						limit = { has_province_modifier = secret_patripassianism_community } religion = patripassianism
					}
				}
				sabellianism = {
					any_demesne_province = {
						limit = { has_province_modifier = secret_sabellianism_community } religion = sabellianism
					}
				}
				psilanthropism = {
					any_demesne_province = {
						limit = { has_province_modifier = secret_psilanthropism_community } religion = psilanthropism
					}
				}
				audianistic = {
					any_demesne_province = {
						limit = { has_province_modifier = secret_audianistic_community } religion = audianistic
					}
				}
				arian = {
					any_demesne_province = {
						limit = { has_province_modifier = secret_arian_community } religion = arian
					}
				}
				monarchianism = {
					any_demesne_province = {
						limit = { has_province_modifier = secret_monarchianism_community } religion = monarchianism
					}
				}
				donatism = {
					any_demesne_province = {
						limit = { has_province_modifier = secret_donatism_community } religion = donatism
					}
				}
				priscillianism = {
					any_demesne_province = {
						limit = { has_province_modifier = secret_priscillianism_community } religion = priscillianism
					}
				}
				islamic = {
					any_demesne_province = {
						limit = { has_province_modifier = secret_islamic_community } religion = islamic
					}
				}
				abadites = {
					any_demesne_province = {
						limit = { has_province_modifier = secret_abadites_community } religion = abadites
					}
				}
				quranism = {
					any_demesne_province = {
						limit = { has_province_modifier = secret_quranism_community } religion = quranism
					}
				}
				qadariyya = {
					any_demesne_province = {
						limit = { has_province_modifier = secret_qadariyya_community } religion = qadariyya
					}
				}
				khawariji = {
					any_demesne_province = {
						limit = { has_province_modifier = secret_khawariji_community } religion = khawariji
					}
				}
				haruriyyah = {
					any_demesne_province = {
						limit = { has_province_modifier = secret_haruriyyah_community } religion = haruriyyah
					}
				}
				mahdi = {
					any_demesne_province = {
						limit = { has_province_modifier = secret_mahdi_community } religion = mahdi
					}
				}
				twelver = {
					any_demesne_province = {
						limit = { has_province_modifier = secret_twelver_community } religion = twelver
					}
				}
				zayid = {
					any_demesne_province = {
						limit = { has_province_modifier = secret_zayid_community } religion = zayid
					}
				}
				ismaili = {
					any_demesne_province = {
						limit = { has_province_modifier = secret_ismaili_community } religion = ismaili
					}
				}
				uwaisi = {
					any_demesne_province = {
						limit = { has_province_modifier = secret_uwaisi_community } religion = uwaisi
					}
				}
				qarmatian = {
					any_demesne_province = {
						limit = { has_province_modifier = secret_qarmatian_community } religion = qarmatian
					}
				}
				root_west_pagan = {
					any_demesne_province = {
						limit = { has_province_modifier = secret_root_west_pagan_community } religion = root_west_pagan
					}
				}
				root_west_pagan_reformed = {
					any_demesne_province = {
						limit = { has_province_modifier = secret_root_west_pagan_reformed_community } religion = root_west_pagan_reformed
					}
				}
				sanamahi = {
					any_demesne_province = {
						limit = { has_province_modifier = secret_sanamahi_community } religion = sanamahi
					}
				}
				sanamahi_reformed = {
					any_demesne_province = {
						limit = { has_province_modifier = secret_sanamahi_reformed_community } religion = sanamahi_reformed
					}
				}
				georgian_pagan = {
					any_demesne_province = {
						limit = { has_province_modifier = secret_georgian_pagan_community } religion = georgian_pagan
					}
				}
				illyran_pagan = {
					any_demesne_province = {
						limit = { has_province_modifier = secret_illyran_pagan_community } religion = illyran_pagan
					}
				}
				illyran_pagan_reformed = {
					any_demesne_province = {
						limit = { has_province_modifier = secret_illyran_pagan_reformed_community } religion = illyran_pagan_reformed
					}
				}
				germanic_pagan = {
					any_demesne_province = {
						limit = { has_province_modifier = secret_germanic_pagan_community } religion = germanic_pagan
					}
				}
				germanic_pagan_reformed = {
					any_demesne_province = {
						limit = { has_province_modifier = secret_germanic_pagan_reformed_community } religion = germanic_pagan_reformed
					}
				}
				west_pagan = {
					any_demesne_province = {
						limit = { has_province_modifier = secret_west_pagan_community } religion = west_pagan
					}
				}
				scythian_pagan = {
					any_demesne_province = {
						limit = { has_province_modifier = secret_scythian_pagan_community } religion = scythian_pagan
					}
				}
				scythian_pagan_reformed = {
					any_demesne_province = {
						limit = { has_province_modifier = secret_scythian_pagan_reformed_community } religion = scythian_pagan_reformed
					}
				}
				semitic_pagan = {
					any_demesne_province = {
						limit = { has_province_modifier = secret_semitic_pagan_community } religion = semitic_pagan
					}
				}
				semitic_pagan_reformed = {
					any_demesne_province = {
						limit = { has_province_modifier = secret_semitic_pagan_reformed_community } religion = semitic_pagan_reformed
					}
				}
				dravidian_pagan = {
					any_demesne_province = {
						limit = { has_province_modifier = secret_dravidian_pagan_community } religion = dravidian_pagan
					}
				}
				dravidian_pagan_reformed = {
					any_demesne_province = {
						limit = { has_province_modifier = secret_dravidian_pagan_reformed_community } religion = dravidian_pagan_reformed
					}
				}
				central_african_pagan = {
					any_demesne_province = {
						limit = { has_province_modifier = secret_central_african_pagan_community } religion = central_african_pagan
					}
				}
				central_african_pagan_reformed = {
					any_demesne_province = {
						limit = { has_province_modifier = secret_central_african_pagan_reformed_community } religion = central_african_pagan_reformed
					}
				}
				gurzil_pagan = {
					any_demesne_province = {
						limit = { has_province_modifier = secret_gurzil_pagan_community } religion = gurzil_pagan
					}
				}
				msoura_pagan = {
					any_demesne_province = {
						limit = { has_province_modifier = secret_msoura_pagan_community } religion = msoura_pagan
					}
				}
				african_solar_pagan = {
					any_demesne_province = {
						limit = { has_province_modifier = secret_african_solar_pagan_community } religion = african_solar_pagan
					}
				}
				african_solar_pagan_reformed = {
					any_demesne_province = {
						limit = { has_province_modifier = secret_african_solar_pagan_reformed_community } religion = african_solar_pagan_reformed
					}
				}
				latin_solar_pagan = {
					any_demesne_province = {
						limit = { has_province_modifier = secret_latin_solar_pagan_community } religion = latin_solar_pagan
					}
				}
				latin_solar_pagan_reformed = {
					any_demesne_province = {
						limit = { has_province_modifier = secret_latin_solar_pagan_reformed_community } religion = latin_solar_pagan_reformed
					}
				}
				mandulis_pagan = {
					any_demesne_province = {
						limit = { has_province_modifier = secret_mandulis_pagan_community } religion = mandulis_pagan
					}
				}
				east_african_pagan = {
					any_demesne_province = {
						limit = { has_province_modifier = secret_east_african_pagan_community } religion = east_african_pagan
					}
				}
				east_african_pagan_reformed = {
					any_demesne_province = {
						limit = { has_province_modifier = secret_east_african_pagan_reformed_community } religion = east_african_pagan_reformed
					}
				}
				assyrian_pagan = {
					any_demesne_province = {
						limit = { has_province_modifier = secret_assyrian_pagan_community } religion = assyrian_pagan
					}
				}
				cybelian_pagan = {
					any_demesne_province = {
						limit = { has_province_modifier = secret_cybelian_pagan_community } religion = cybelian_pagan
					}
				}
				mastimani = {
					any_demesne_province = {
						limit = { has_province_modifier = secret_mastimani_community } religion = mastimani
					}
				}
				neoplatonist = {
					any_demesne_province = {
						limit = { has_province_modifier = secret_neoplatonist_community } religion = neoplatonist
					}
				}
				mithraic_pagan = {
					any_demesne_province = {
						limit = { has_province_modifier = secret_mithraic_pagan_community } religion = mithraic_pagan
					}
				}
				zurvanist = {
					any_demesne_province = {
						limit = { has_province_modifier = secret_zurvanist_community } religion = zurvanist
					}
				}
				khurramite = {
					any_demesne_province = {
						limit = { has_province_modifier = secret_khurramite_community } religion = khurramite
					}
				}
				hepthal_religion = {
					any_demesne_province = {
						limit = { has_province_modifier = secret_hepthal_religion_community } religion = hepthal_religion
					}
				}
				tzadikite = {
					any_demesne_province = {
						limit = { has_province_modifier = secret_tzadikite_community } religion = tzadikite
					}
				}
				bosporan_faith = {
					any_demesne_province = {
						limit = { has_province_modifier = secret_bosporan_faith_community } religion = bosporan_faith
					}
				}
				ajivika = {
					any_demesne_province = {
						limit = { has_province_modifier = secret_ajivika_community } religion = ajivika
					}
				}
				carvaka = {
					any_demesne_province = {
						limit = { has_province_modifier = secret_carvaka_community } religion = carvaka
					}
				}
				mimamsa = {
					any_demesne_province = {
						limit = { has_province_modifier = secret_mimamsa_community } religion = mimamsa
					}
				}
				tantric = {
					any_demesne_province = {
						limit = { has_province_modifier = secret_tantric_community } religion = tantric
					}
				}
				bhakti = {
					any_demesne_province = {
						limit = { has_province_modifier = secret_bhakti_community } religion = bhakti
					}
				}
				sramanic = {
					any_demesne_province = {
						limit = { has_province_modifier = secret_sramanic_community } religion = sramanic
					}
				}
				confucianism = {
					any_demesne_province = {
						limit = { has_province_modifier = secret_confucianism_community } religion = confucianism
					}
				}
				vasconic_pagan = {
					any_demesne_province = {
						limit = { has_province_modifier = secret_vasconic_pagan_community } religion = vasconic_pagan
					}
				}
				vasconic_pagan_reformed = {
					any_demesne_province = {
						limit = { has_province_modifier = secret_vasconic_pagan_reformed_community } religion = vasconic_pagan_reformed
					}
				}
				dacian_pagan = {
					any_demesne_province = {
						limit = { has_province_modifier = secret_dacian_pagan_community } religion = dacian_pagan
					}
				}
				dacian_pagan_reformed = {
					any_demesne_province = {
						limit = { has_province_modifier = secret_dacian_pagan_reformed_community } religion = dacian_pagan_reformed
					}
				}
				
				### Vanilla ###
				catholic = {
					any_demesne_province = {
						limit = { has_province_modifier = secret_catholic_community } religion = catholic
					}
				}
				cathar = {
					any_demesne_province = {
						limit = { has_province_modifier = secret_cathar_community } religion = cathar
					}
				}
				fraticelli = {
					any_demesne_province = {
						limit = { has_province_modifier = secret_fraticelli_community } religion = fraticelli
					}
				}
				waldensian = {
					any_demesne_province = {
						limit = { has_province_modifier = secret_waldensian_community } religion = waldensian
					}
				}
				lollard = {
					any_demesne_province = {
						limit = { has_province_modifier = secret_lollard_community } religion = lollard
					}
				}
				orthodox = {
					any_demesne_province = {
						limit = { has_province_modifier = secret_orthodox_community } religion = orthodox
					}
				}
				miaphysite = {
					any_demesne_province = {
						limit = { has_province_modifier = secret_miaphysite_community } religion = miaphysite
					}
				}
				monophysite = {
					any_demesne_province = {
						limit = { has_province_modifier = secret_monophysite_community } religion = monophysite
					}
				}
				bogomilist = {
					any_demesne_province = {
						limit = { has_province_modifier = secret_bogomilist_community } religion = bogomilist
					}
				}
				monothelite = {
					any_demesne_province = {
						limit = { has_province_modifier = secret_monothelite_community } religion = monothelite
					}
				}
				iconoclast = {
					any_demesne_province = {
						limit = { has_province_modifier = secret_iconoclast_community } religion = iconoclast
					}
				}
				paulician = {
					any_demesne_province = {
						limit = { has_province_modifier = secret_paulician_community } religion = paulician
					}
				}
				nestorian = {
					any_demesne_province = {
						limit = { has_province_modifier = secret_nestorian_community } religion = nestorian
					}
				}
				messalian = {
					any_demesne_province = {
						limit = { has_province_modifier = secret_messalian_community } religion = messalian
					}
				}
				sunni = {
					any_demesne_province = {
						limit = { has_province_modifier = secret_sunni_community } religion = sunni
					}
				}
				zikri = {
					any_demesne_province = {
						limit = { has_province_modifier = secret_zikri_community } religion = zikri
					}
				}
				yazidi = {
					any_demesne_province = {
						limit = { has_province_modifier = secret_yazidi_community } religion = yazidi
					}
				}
				ibadi = {
					any_demesne_province = {
						limit = { has_province_modifier = secret_ibadi_community } religion = ibadi
					}
				}
				kharijite = {
					any_demesne_province = {
						limit = { has_province_modifier = secret_kharijite_community } religion = kharijite
					}
				}
				shiite = {
					any_demesne_province = {
						limit = { has_province_modifier = secret_shiite_community } religion = shiite
					}
				}
				druze = {
					any_demesne_province = {
						limit = { has_province_modifier = secret_druze_community } religion = druze
					}
				}
				hurufi = {
					any_demesne_province = {
						limit = { has_province_modifier = secret_hurufi_community } religion = hurufi
					}
				}
				aztec = {
					any_demesne_province = {
						limit = { has_province_modifier = secret_aztec_community } religion = aztec
					}
				}
				aztec_reformed = {
					any_demesne_province = {
						limit = { has_province_modifier = secret_aztec_reformed_community } religion = aztec_reformed
					}
				}
				jewish = {
					any_demesne_province = {
						limit = { has_province_modifier = secret_jewish_community } religion = jewish
					}
				}
				samaritan = {
					any_demesne_province = {
						limit = { has_province_modifier = secret_samaritan_community } religion = samaritan
					}
				}
				karaite = {
					any_demesne_province = {
						limit = { has_province_modifier = secret_karaite_community } religion = karaite
					}
				}
				zoroastrian = {
					any_demesne_province = {
						limit = { has_province_modifier = secret_zoroastrian_community } religion = zoroastrian
					}
				}
				mazdaki = {
					any_demesne_province = {
						limit = { has_province_modifier = secret_mazdaki_community } religion = mazdaki
					}
				}
				manichean = {
					any_demesne_province = {
						limit = { has_province_modifier = secret_manichean_community } religion = manichean
					}
				}
				hindu = {
					any_demesne_province = {
						limit = { has_province_modifier = secret_hindu_community } religion = hindu
					}
				}
				buddhist = {
					any_demesne_province = {
						limit = { has_province_modifier = secret_buddhist_community } religion = buddhist
					}
				}
				jain = {
					any_demesne_province = {
						limit = { has_province_modifier = secret_jain_community } religion = jain
					}
				}
				norse_pagan_reformed = {
					any_demesne_province = {
						limit = { has_province_modifier = secret_norse_pagan_reformed_community } 
						religion = norse_pagan_reformed
					}
				}
				norse_pagan = {
					any_demesne_province = {
						limit = { has_province_modifier = secret_norse_pagan_community } 
						religion = norse_pagan
					}
				}
				baltic_pagan_reformed = {
					any_demesne_province = {
						limit = { has_province_modifier = secret_baltic_pagan_reformed_community } 
						religion = baltic_pagan_reformed
					}
				}
				baltic_pagan = {
					any_demesne_province = {
						limit = { has_province_modifier = secret_baltic_pagan_community } 
						religion = baltic_pagan
					}
				}
				finnish_pagan_reformed = {
					any_demesne_province = {
						limit = { has_province_modifier = secret_finnish_pagan_reformed_community } 
						religion = finnish_pagan_reformed
					}
				}
				finnish_pagan = {
					any_demesne_province = {
						limit = { has_province_modifier = secret_finnish_pagan_community } 
						religion = finnish_pagan
					}
				}
				slavic_pagan_reformed = {
					any_demesne_province = {
						limit = { has_province_modifier = secret_slavic_pagan_reformed_community } 
						religion = slavic_pagan_reformed
					}
				}
				slavic_pagan = {
					any_demesne_province = {
						limit = { has_province_modifier = secret_slavic_pagan_community } 
						religion = slavic_pagan
					}
				}
				tengri_pagan_reformed = {
					any_demesne_province = {
						limit = { has_province_modifier = secret_tengri_pagan_reformed_community } 
						religion = tengri_pagan_reformed
					}
				}
				tengri_pagan = {
					any_demesne_province = {
						limit = { has_province_modifier = secret_tengri_pagan_community } 
						religion = tengri_pagan
					}
				}
				west_african_pagan_reformed = {
					any_demesne_province = {
						limit = { has_province_modifier = secret_west_african_pagan_reformed_community } 
						religion = west_african_pagan_reformed
					}
				}
				west_african_pagan = {
					any_demesne_province = {
						limit = { has_province_modifier = secret_west_african_pagan_community } 
						religion = west_african_pagan
					}
				}
				zun_pagan_reformed = {
					any_demesne_province = {
						limit = { has_province_modifier = secret_zun_pagan_reformed_community } 
						religion = zun_pagan_reformed
					}
				}
				zun_pagan = {
					any_demesne_province = {
						limit = { has_province_modifier = secret_zun_pagan_community } 
						religion = zun_pagan
					}
				}

				### ACR ###
				celtic_pagan = {
					any_demesne_province = {
						limit = { has_province_modifier = secret_celtic_pagan_community } 
						religion = celtic_pagan
					}
				}
				celtic_pagan_reformed = {
					any_demesne_province = {
						limit = { has_province_modifier = secret_celtic_pagan_reformed_community } 
						religion = celtic_pagan_reformed
					}
				}
				hellenic_pagan = {
					any_demesne_province = {
						limit = { has_province_modifier = secret_hellenic_pagan_community } 
						religion = hellenic_pagan
					}
				}
				egyptian_pagan = {
					any_demesne_province = {
						limit = { has_province_modifier = secret_egyptian_pagan_community } 
						religion = egyptian_pagan
					}
				}
				aten_pagan = {
					any_demesne_province = {
						limit = { has_province_modifier = secret_aten_pagan_community } 
						religion = aten_pagan
					}
				}
			}
			if = {
				limit = {
					liege = {
						NOT = {
							character = ROOT
						}
					}
				}
				liege = {
					character_event = { id = MNM.3840 }
				}
			}
			hidden_tooltip = {
				set_variable = { which = visibility_value value = 0 }
				remove_character_modifier = highly_suspect
				remove_character_modifier = under_suspicion
			}
		}
		
		
		
		ai_will_do = {
			factor = 0
		}
	}
}

#########################################################################################################
################ Secret society title decisions
#########################################################################################################
title_decisions = {
	secret_religions_prepare_grounds = {
		only_playable = yes
		
		ai_target_filter = realm_owned
		filter = realm_owned
		
		from_potential = {
			society_rank > 2
			society_member_of = secret_religious_cult
		}
		
		potential = {
			tier = COUNT
			holder_scope = {
				OR = {
					character = FROM
					any_liege = { character = FROM }
				}
			}
			OR = {
			
				### WtWSMS ###
				AND = {
					FROM = {
						society_member_of = secret_religious_society_aquileian
					}
					NOT = { location = { religion = aquileian } }
					NOT = { location = { has_province_modifier = secret_aquileian_community } }
				}
				AND = {
					FROM = {
						society_member_of = secret_religious_society_nicene
					}
					NOT = { location = { religion = nicene } }
					NOT = { location = { has_province_modifier = secret_nicene_community } }
				}
				AND = {
					FROM = {
						society_member_of = secret_religious_society_total_depravity
					}
					NOT = { location = { religion = total_depravity } }
					NOT = { location = { has_province_modifier = secret_total_depravity_community } }
				}
				AND = {
					FROM = {
						society_member_of = secret_religious_society_eutychian
					}
					NOT = { location = { religion = eutychian } }
					NOT = { location = { has_province_modifier = secret_eutychian_community } }
				}
				AND = {
					FROM = {
						society_member_of = secret_religious_society_binitarian
					}
					NOT = { location = { religion = binitarian } }
					NOT = { location = { has_province_modifier = secret_binitarian_community } }
				}
				AND = {
					FROM = {
						society_member_of = secret_religious_society_georgian_orthodox
					}
					NOT = { location = { religion = georgian_orthodox } }
					NOT = { location = { has_province_modifier = secret_georgian_orthodox_community } }
				}
				AND = {
					FROM = {
						society_member_of = secret_religious_society_insular
					}
					NOT = { location = { religion = insular } }
					NOT = { location = { has_province_modifier = secret_insular_community } }
				}
				AND = {
					FROM = {
						society_member_of = secret_religious_society_pelagianism
					}
					NOT = { location = { religion = pelagianism } }
					NOT = { location = { has_province_modifier = secret_pelagianism_community } }
				}
				AND = {
					FROM = {
						society_member_of = secret_religious_society_antinomianism
					}
					NOT = { location = { religion = antinomianism } }
					NOT = { location = { has_province_modifier = secret_antinomianism_community } }
				}
				AND = {
					FROM = {
						society_member_of = secret_religious_society_ebionites
					}
					NOT = { location = { religion = ebionites } }
					NOT = { location = { has_province_modifier = secret_ebionites_community } }
				}
				AND = {
					FROM = {
						society_member_of = secret_religious_society_marcionism
					}
					NOT = { location = { religion = marcionism } }
					NOT = { location = { has_province_modifier = secret_marcionism_community } }
				}
				AND = {
					FROM = {
						society_member_of = secret_religious_society_montanist
					}
					NOT = { location = { religion = montanist } }
					NOT = { location = { has_province_modifier = secret_montanist_community } }
				}
				AND = {
					FROM = {
						society_member_of = secret_religious_society_sethian
					}
					NOT = { location = { religion = sethian } }
					NOT = { location = { has_province_modifier = secret_sethian_community } }
				}
				AND = {
					FROM = {
						society_member_of = secret_religious_society_valentinianism
					}
					NOT = { location = { religion = valentinianism } }
					NOT = { location = { has_province_modifier = secret_valentinianism_community } }
				}
				AND = {
					FROM = {
						society_member_of = secret_religious_society_apollinarian
					}
					NOT = { location = { religion = apollinarian } }
					NOT = { location = { has_province_modifier = secret_apollinarian_community } }
				}
				AND = {
					FROM = {
						society_member_of = secret_religious_society_adoptionism
					}
					NOT = { location = { religion = adoptionism } }
					NOT = { location = { has_province_modifier = secret_adoptionism_community } }
				}
				AND = {
					FROM = {
						society_member_of = secret_religious_society_docetic
					}
					NOT = { location = { religion = docetic } }
					NOT = { location = { has_province_modifier = secret_docetic_community } }
				}
				AND = {
					FROM = {
						society_member_of = secret_religious_society_pneumatomachians
					}
					NOT = { location = { religion = pneumatomachians } }
					NOT = { location = { has_province_modifier = secret_pneumatomachians_community } }
				}
				AND = {
					FROM = {
						society_member_of = secret_religious_society_melchisedechianism
					}
					NOT = { location = { religion = melchisedechianism } }
					NOT = { location = { has_province_modifier = secret_melchisedechianism_community } }
				}
				AND = {
					FROM = {
						society_member_of = secret_religious_society_patripassianism
					}
					NOT = { location = { religion = patripassianism } }
					NOT = { location = { has_province_modifier = secret_patripassianism_community } }
				}
				AND = {
					FROM = {
						society_member_of = secret_religious_society_sabellianism
					}
					NOT = { location = { religion = sabellianism } }
					NOT = { location = { has_province_modifier = secret_sabellianism_community } }
				}
				AND = {
					FROM = {
						society_member_of = secret_religious_society_psilanthropism
					}
					NOT = { location = { religion = psilanthropism } }
					NOT = { location = { has_province_modifier = secret_psilanthropism_community } }
				}
				AND = {
					FROM = {
						society_member_of = secret_religious_society_audianistic
					}
					NOT = { location = { religion = audianistic } }
					NOT = { location = { has_province_modifier = secret_audianistic_community } }
				}
				AND = {
					FROM = {
						society_member_of = secret_religious_society_arian
					}
					NOT = { location = { religion = arian } }
					NOT = { location = { has_province_modifier = secret_arian_community } }
				}
				AND = {
					FROM = {
						society_member_of = secret_religious_society_monarchianism
					}
					NOT = { location = { religion = monarchianism } }
					NOT = { location = { has_province_modifier = secret_monarchianism_community } }
				}
				AND = {
					FROM = {
						society_member_of = secret_religious_society_donatism
					}
					NOT = { location = { religion = donatism } }
					NOT = { location = { has_province_modifier = secret_donatism_community } }
				}
				AND = {
					FROM = {
						society_member_of = secret_religious_society_priscillianism
					}
					NOT = { location = { religion = priscillianism } }
					NOT = { location = { has_province_modifier = secret_priscillianism_community } }
				}
				AND = {
					FROM = {
						society_member_of = secret_religious_society_islamic
					}
					NOT = { location = { religion = islamic } }
					NOT = { location = { has_province_modifier = secret_islamic_community } }
				}
				AND = {
					FROM = {
						society_member_of = secret_religious_society_abadites
					}
					NOT = { location = { religion = abadites } }
					NOT = { location = { has_province_modifier = secret_abadites_community } }
				}
				AND = {
					FROM = {
						society_member_of = secret_religious_society_quranism
					}
					NOT = { location = { religion = quranism } }
					NOT = { location = { has_province_modifier = secret_quranism_community } }
				}
				AND = {
					FROM = {
						society_member_of = secret_religious_society_qadariyya
					}
					NOT = { location = { religion = qadariyya } }
					NOT = { location = { has_province_modifier = secret_qadariyya_community } }
				}
				AND = {
					FROM = {
						society_member_of = secret_religious_society_khawariji
					}
					NOT = { location = { religion = khawariji } }
					NOT = { location = { has_province_modifier = secret_khawariji_community } }
				}
				AND = {
					FROM = {
						society_member_of = secret_religious_society_haruriyyah
					}
					NOT = { location = { religion = haruriyyah } }
					NOT = { location = { has_province_modifier = secret_haruriyyah_community } }
				}
				AND = {
					FROM = {
						society_member_of = secret_religious_society_mahdi
					}
					NOT = { location = { religion = mahdi } }
					NOT = { location = { has_province_modifier = secret_mahdi_community } }
				}
				AND = {
					FROM = {
						society_member_of = secret_religious_society_twelver
					}
					NOT = { location = { religion = twelver } }
					NOT = { location = { has_province_modifier = secret_twelver_community } }
				}
				AND = {
					FROM = {
						society_member_of = secret_religious_society_zayid
					}
					NOT = { location = { religion = zayid } }
					NOT = { location = { has_province_modifier = secret_zayid_community } }
				}
				AND = {
					FROM = {
						society_member_of = secret_religious_society_ismaili
					}
					NOT = { location = { religion = ismaili } }
					NOT = { location = { has_province_modifier = secret_ismaili_community } }
				}
				AND = {
					FROM = {
						society_member_of = secret_religious_society_uwaisi
					}
					NOT = { location = { religion = uwaisi } }
					NOT = { location = { has_province_modifier = secret_uwaisi_community } }
				}
				AND = {
					FROM = {
						society_member_of = secret_religious_society_qarmatian
					}
					NOT = { location = { religion = qarmatian } }
					NOT = { location = { has_province_modifier = secret_qarmatian_community } }
				}
				AND = {
					FROM = {
						society_member_of = secret_religious_society_root_west_pagan
					}
					NOT = { location = { religion = root_west_pagan } }
					NOT = { location = { has_province_modifier = secret_root_west_pagan_community } }
				}
				AND = {
					FROM = {
						society_member_of = secret_religious_society_root_west_pagan_reformed
					}
					NOT = { location = { religion = root_west_pagan_reformed } }
					NOT = { location = { has_province_modifier = secret_root_west_pagan_reformed_community } }
				}
				AND = {
					FROM = {
						society_member_of = secret_religious_society_sanamahi
					}
					NOT = { location = { religion = sanamahi } }
					NOT = { location = { has_province_modifier = secret_sanamahi_community } }
				}
				AND = {
					FROM = {
						society_member_of = secret_religious_society_sanamahi_reformed
					}
					NOT = { location = { religion = sanamahi_reformed } }
					NOT = { location = { has_province_modifier = secret_sanamahi_reformed_community } }
				}
				AND = {
					FROM = {
						society_member_of = secret_religious_society_georgian_pagan
					}
					NOT = { location = { religion = georgian_pagan } }
					NOT = { location = { has_province_modifier = secret_georgian_pagan_community } }
				}
				AND = {
					FROM = {
						society_member_of = secret_religious_society_illyran_pagan
					}
					NOT = { location = { religion = illyran_pagan } }
					NOT = { location = { has_province_modifier = secret_illyran_pagan_community } }
				}
				AND = {
					FROM = {
						society_member_of = secret_religious_society_illyran_pagan_reformed
					}
					NOT = { location = { religion = illyran_pagan_reformed } }
					NOT = { location = { has_province_modifier = secret_illyran_pagan_reformed_community } }
				}
				AND = {
					FROM = {
						society_member_of = secret_religious_society_germanic_pagan
					}
					NOT = { location = { religion = germanic_pagan } }
					NOT = { location = { has_province_modifier = secret_germanic_pagan_community } }
				}
				AND = {
					FROM = {
						society_member_of = secret_religious_society_germanic_pagan_reformed
					}
					NOT = { location = { religion = germanic_pagan_reformed } }
					NOT = { location = { has_province_modifier = secret_germanic_pagan_reformed_community } }
				}
				AND = {
					FROM = {
						society_member_of = secret_religious_society_west_pagan
					}
					NOT = { location = { religion = west_pagan } }
					NOT = { location = { has_province_modifier = secret_west_pagan_community } }
				}
				AND = {
					FROM = {
						society_member_of = secret_religious_society_scythian_pagan
					}
					NOT = { location = { religion = scythian_pagan } }
					NOT = { location = { has_province_modifier = secret_scythian_pagan_community } }
				}
				AND = {
					FROM = {
						society_member_of = secret_religious_society_scythian_pagan_reformed
					}
					NOT = { location = { religion = scythian_pagan_reformed } }
					NOT = { location = { has_province_modifier = secret_scythian_pagan_reformed_community } }
				}
				AND = {
					FROM = {
						society_member_of = secret_religious_society_semitic_pagan
					}
					NOT = { location = { religion = semitic_pagan } }
					NOT = { location = { has_province_modifier = secret_semitic_pagan_community } }
				}
				AND = {
					FROM = {
						society_member_of = secret_religious_society_semitic_pagan_reformed
					}
					NOT = { location = { religion = semitic_pagan_reformed } }
					NOT = { location = { has_province_modifier = secret_semitic_pagan_reformed_community } }
				}
				AND = {
					FROM = {
						society_member_of = secret_religious_society_dravidian_pagan
					}
					NOT = { location = { religion = dravidian_pagan } }
					NOT = { location = { has_province_modifier = secret_dravidian_pagan_community } }
				}
				AND = {
					FROM = {
						society_member_of = secret_religious_society_dravidian_pagan_reformed
					}
					NOT = { location = { religion = dravidian_pagan_reformed } }
					NOT = { location = { has_province_modifier = secret_dravidian_pagan_reformed_community } }
				}
				AND = {
					FROM = {
						society_member_of = secret_religious_society_central_african_pagan
					}
					NOT = { location = { religion = central_african_pagan } }
					NOT = { location = { has_province_modifier = secret_central_african_pagan_community } }
				}
				AND = {
					FROM = {
						society_member_of = secret_religious_society_central_african_pagan_reformed
					}
					NOT = { location = { religion = central_african_pagan_reformed } }
					NOT = { location = { has_province_modifier = secret_central_african_pagan_reformed_community } }
				}
				AND = {
					FROM = {
						society_member_of = secret_religious_society_gurzil_pagan
					}
					NOT = { location = { religion = gurzil_pagan } }
					NOT = { location = { has_province_modifier = secret_gurzil_pagan_community } }
				}
				AND = {
					FROM = {
						society_member_of = secret_religious_society_msoura_pagan
					}
					NOT = { location = { religion = msoura_pagan } }
					NOT = { location = { has_province_modifier = secret_msoura_pagan_community } }
				}
				AND = {
					FROM = {
						society_member_of = secret_religious_society_african_solar_pagan
					}
					NOT = { location = { religion = african_solar_pagan } }
					NOT = { location = { has_province_modifier = secret_african_solar_pagan_community } }
				}
				AND = {
					FROM = {
						society_member_of = secret_religious_society_african_solar_pagan_reformed
					}
					NOT = { location = { religion = african_solar_pagan_reformed } }
					NOT = { location = { has_province_modifier = secret_african_solar_pagan_reformed_community } }
				}
				AND = {
					FROM = {
						society_member_of = secret_religious_society_latin_solar_pagan
					}
					NOT = { location = { religion = latin_solar_pagan } }
					NOT = { location = { has_province_modifier = secret_latin_solar_pagan_community } }
				}
				AND = {
					FROM = {
						society_member_of = secret_religious_society_latin_solar_pagan_reformed
					}
					NOT = { location = { religion = latin_solar_pagan_reformed } }
					NOT = { location = { has_province_modifier = secret_latin_solar_pagan_reformed_community } }
				}
				AND = {
					FROM = {
						society_member_of = secret_religious_society_mandulis_pagan
					}
					NOT = { location = { religion = mandulis_pagan } }
					NOT = { location = { has_province_modifier = secret_mandulis_pagan_community } }
				}
				AND = {
					FROM = {
						society_member_of = secret_religious_society_east_african_pagan
					}
					NOT = { location = { religion = east_african_pagan } }
					NOT = { location = { has_province_modifier = secret_east_african_pagan_community } }
				}
				AND = {
					FROM = {
						society_member_of = secret_religious_society_east_african_pagan_reformed
					}
					NOT = { location = { religion = east_african_pagan_reformed } } 
					NOT = { location = { has_province_modifier = secret_east_african_pagan_reformed_community } }
				}
				AND = {
					FROM = {
						society_member_of = secret_religious_society_assyrian_pagan
					}
					NOT = { location = { religion = assyrian_pagan } }
					NOT = { location = { has_province_modifier = secret_assyrian_pagan_community } }
				}
				AND = {
					FROM = {
						society_member_of = secret_religious_society_cybelian_pagan
					}
					NOT = { location = { religion = cybelian_pagan } }
					NOT = { location = { has_province_modifier = secret_cybelian_pagan_community } }
				}
				AND = {
					FROM = {
						society_member_of = secret_religious_society_mastimani
					}
					NOT = { location = { religion = mastimani } }
					NOT = { location = { has_province_modifier = secret_mastimani_community } }
				}
				AND = {
					FROM = {
						society_member_of = secret_religious_society_neoplatonist
					}
					NOT = { location = { religion = neoplatonist } }
					NOT = { location = { has_province_modifier = secret_neoplatonist_community } }
				}
				AND = {
					FROM = {
						society_member_of = secret_religious_society_mithraic_pagan
					}
					NOT = { location = { religion = mithraic_pagan } }
					NOT = { location = { has_province_modifier = secret_mithraic_pagan_community } }
				}
				AND = {
					FROM = {
						society_member_of = secret_religious_society_zurvanist
					}
					NOT = { location = { religion = zurvanist } }
					NOT = { location = { has_province_modifier = secret_zurvanist_community } }
				}
				AND = {
					FROM = {
						society_member_of = secret_religious_society_khurramite
					}
					NOT = { location = { religion = khurramite } }
					NOT = { location = { has_province_modifier = secret_khurramite_community } }
				}
				AND = {
					FROM = {
						society_member_of = secret_religious_society_hepthal_religion
					}
					NOT = { location = { religion = hepthal_religion } }
					NOT = { location = { has_province_modifier = secret_hepthal_religion_community } }
				}
				AND = {
					FROM = {
						society_member_of = secret_religious_society_tzadikite
					}
					NOT = { location = { religion = tzadikite } }
					NOT = { location = { has_province_modifier = secret_tzadikite_community } }
				}
				AND = {
					FROM = {
						society_member_of = secret_religious_society_bosporan_faith
					}
					NOT = { location = { religion = bosporan_faith } }
					NOT = { location = { has_province_modifier = secret_bosporan_faith_community } }
				}
				AND = {
					FROM = {
						society_member_of = secret_religious_society_ajivika
					}
					NOT = { location = { religion = ajivika } }
					NOT = { location = { has_province_modifier = secret_ajivika_community } }
				}
				AND = {
					FROM = {
						society_member_of = secret_religious_society_carvaka
					}
					NOT = { location = { religion = carvaka } }
					NOT = { location = { has_province_modifier = secret_carvaka_community } }
				}
				AND = {
					FROM = {
						society_member_of = secret_religious_society_mimamsa
					}
					NOT = { location = { religion = mimamsa } }
					NOT = { location = { has_province_modifier = secret_mimamsa_community } }
				}
				AND = {
					FROM = {
						society_member_of = secret_religious_society_tantric
					}
					NOT = { location = { religion = tantric } }
					NOT = { location = { has_province_modifier = secret_tantric_community } }
				}
				AND = {
					FROM = {
						society_member_of = secret_religious_society_bhakti
					}
					NOT = { location = { religion = bhakti } }
					NOT = { location = { has_province_modifier = secret_bhakti_community } }
				}
				AND = {
					FROM = {
						society_member_of = secret_religious_society_sramanic
					}
					NOT = { location = { religion = sramanic } }
					NOT = { location = { has_province_modifier = secret_sramanic_community } }
				}
				AND = {
					FROM = {
						society_member_of = secret_religious_society_confucianism
					}
					NOT = { location = { religion = confucianism } }
					NOT = { location = { has_province_modifier = secret_confucianism_community } }
				}
				AND = {
					FROM = {
						society_member_of = secret_religious_society_vasconic_pagan
					}
					NOT = { location = { religion = vasconic_pagan } }
					NOT = { location = { has_province_modifier = secret_vasconic_pagan_community } }
				}
				AND = {
					FROM = {
						society_member_of = secret_religious_society_vasconic_pagan_reformed
					}
					NOT = { location = { religion = vasconic_pagan_reformed } }
					NOT = { location = { has_province_modifier = secret_vasconic_pagan_reformed_community } }
				}
				AND = {
					FROM = {
						society_member_of = secret_religious_society_dacian_pagan
					}
					NOT = { location = { religion = dacian_pagan } }
					NOT = { location = { has_province_modifier = secret_dacian_pagan_community } }
				}
				AND = {
					FROM = {
						society_member_of = secret_religious_society_dacian_pagan_reformed
					}
					NOT = { location = { religion = dacian_pagan_reformed } }
					NOT = { location = { has_province_modifier = secret_dacian_pagan_reformed_community } }
				}
			
				### Vanilla ###
				AND = {
					FROM = {
						society_member_of = secret_religious_society_catholic
					}
					NOT = { location = { religion = catholic } }
					NOT = { location = { has_province_modifier = secret_catholic_community } }
				}
				AND = {
					FROM = {
						society_member_of = secret_religious_society_cathar
					}
					NOT = { location = { religion = cathar } }
					NOT = { location = { has_province_modifier = secret_cathar_community } }
				}
				AND = {
					FROM = {
						society_member_of = secret_religious_society_fraticelli
					}
					NOT = { location = { religion = fraticelli } }
					NOT = { location = { has_province_modifier = secret_fraticelli_community } }
				}
				AND = {
					FROM = {
						society_member_of = secret_religious_society_waldensian
					}
					NOT = { location = { religion = waldensian } }
					NOT = { location = { has_province_modifier = secret_waldensian_community } }
				}
				AND = {
					FROM = {
						society_member_of = secret_religious_society_lollard
					}
					NOT = { location = { religion = lollard } }
					NOT = { location = { has_province_modifier = secret_lollard_community } }
				}
				AND = {
					FROM = {
						society_member_of = secret_religious_society_orthodox
					}
					NOT = { location = { religion = orthodox } }
					NOT = { location = { has_province_modifier = secret_orthodox_community } }
				}
				AND = {
					FROM = {
						society_member_of = secret_religious_society_miaphysite
					}
					NOT = { location = { religion = miaphysite } }
					NOT = { location = { has_province_modifier = secret_miaphysite_community } }
				}
				AND = {
					FROM = {
						society_member_of = secret_religious_society_monophysite
					}
					NOT = { location = { religion = monophysite } }
					NOT = { location = { has_province_modifier = secret_monophysite_community } }
				}
				AND = {
					FROM = {
						society_member_of = secret_religious_society_bogomilist
					}
					NOT = { location = { religion = bogomilist } }
					NOT = { location = { has_province_modifier = secret_bogomilist_community } }
				}
				AND = {
					FROM = {
						society_member_of = secret_religious_society_monothelite
					}
					NOT = { location = { religion = monothelite } }
					NOT = { location = { has_province_modifier = secret_monothelite_community } }
				}
				AND = {
					FROM = {
						society_member_of = secret_religious_society_iconoclast
					}
					NOT = { location = { religion = iconoclast } }
					NOT = { location = { has_province_modifier = secret_iconoclast_community } }
				}
				AND = {
					FROM = {
						society_member_of = secret_religious_society_paulician
					}
					NOT = { location = { religion = paulician } }
					NOT = { location = { has_province_modifier = secret_paulician_community } }
				}
				AND = {
					FROM = {
						society_member_of = secret_religious_society_nestorian
					}
					NOT = { location = { religion = nestorian } }
					NOT = { location = { has_province_modifier = secret_nestorian_community } }
				}
				AND = {
					FROM = {
						society_member_of = secret_religious_society_messalian
					}
					NOT = { location = { religion = messalian } }
					NOT = { location = { has_province_modifier = secret_messalian_community } }
				}
				AND = {
					FROM = {
						society_member_of = secret_religious_society_sunni
					}
					NOT = { location = { religion = sunni } }
					NOT = { location = { has_province_modifier = secret_sunni_community } }
				}
				AND = {
					FROM = {
						society_member_of = secret_religious_society_zikri
					}
					NOT = { location = { religion = zikri } }
					NOT = { location = { has_province_modifier = secret_zikri_community } }
				}
				AND = {
					FROM = {
						society_member_of = secret_religious_society_yazidi
					}
					NOT = { location = { religion = yazidi } }
					NOT = { location = { has_province_modifier = secret_yazidi_community } }
				}
				AND = {
					FROM = {
						society_member_of = secret_religious_society_ibadi
					}
					NOT = { location = { religion = ibadi } }
					NOT = { location = { has_province_modifier = secret_ibadi_community } }
				}
				AND = {
					FROM = {
						society_member_of = secret_religious_society_kharijite
					}
					NOT = { location = { religion = kharijite } }
					NOT = { location = { has_province_modifier = secret_kharijite_community } }
				}
				AND = {
					FROM = {
						society_member_of = secret_religious_society_shiite
					}
					NOT = { location = { religion = shiite } }
					NOT = { location = { has_province_modifier = secret_shiite_community } }
				}
				AND = {
					FROM = {
						society_member_of = secret_religious_society_druze
					}
					NOT = { location = { religion = druze } }
					NOT = { location = { has_province_modifier = secret_druze_community } }
				}
				AND = {
					FROM = {
						society_member_of = secret_religious_society_hurufi
					}
					NOT = { location = { religion = hurufi } }
					NOT = { location = { has_province_modifier = secret_hurufi_community } }
				}
				AND = {
					FROM = {
						society_member_of = secret_religious_society_aztec
					}
					NOT = { location = { religion = aztec } }
					NOT = { location = { has_province_modifier = secret_aztec_community } }
				}
				AND = {
					FROM = {
						society_member_of = secret_religious_society_aztec_reformed
					}
					NOT = { location = { religion = aztec_reformed } }
					NOT = { location = { has_province_modifier = secret_aztec_reformed_community } }
				}
				AND = {
					FROM = {
						society_member_of = secret_religious_society_jewish
					}
					NOT = { location = { religion = jewish } }
					NOT = { location = { has_province_modifier = secret_jewish_community } }
				}
				AND = {
					FROM = {
						society_member_of = secret_religious_society_samaritan
					}
					NOT = { location = { religion = samaritan } }
					NOT = { location = { has_province_modifier = secret_samaritan_community } }
				}
				AND = {
					FROM = {
						society_member_of = secret_religious_society_karaite
					}
					NOT = { location = { religion = karaite } }
					NOT = { location = { has_province_modifier = secret_karaite_community } }
				}
				AND = {
					FROM = {
						society_member_of = secret_religious_society_zoroastrian
					}
					NOT = { location = { religion = zoroastrian } }
					NOT = { location = { has_province_modifier = secret_zoroastrian_community } }
				}
				AND = {
					FROM = {
						society_member_of = secret_religious_society_mazdaki
					}
					NOT = { location = { religion = mazdaki } }
					NOT = { location = { has_province_modifier = secret_mazdaki_community } }
				}
				AND = {
					FROM = {
						society_member_of = secret_religious_society_manichean
					}
					NOT = { location = { religion = manichean } }
					NOT = { location = { has_province_modifier = secret_manichean_community } }
				}
				AND = {
					FROM = {
						society_member_of = secret_religious_society_khurmazta
					}
					NOT = { location = { religion = khurmazta } }
					NOT = { location = { has_province_modifier = secret_khurmazta_community } }
				}
				AND = {
					FROM = {
						society_member_of = secret_religious_society_bon
					}
					NOT = { location = { religion = bon } }
					NOT = { location = { has_province_modifier = secret_bon_community } }
				}
				AND = {
					FROM = {
						society_member_of = secret_religious_society_bon_reformed
					}
					NOT = { location = { religion = bon_reformed } }
					NOT = { location = { has_province_modifier = secret_bon_reformed_community } }
				}
				AND = {
					FROM = {
						society_member_of = secret_religious_society_hellenic_pagan
					}
					NOT = { location = { religion = hellenic_pagan } }
					NOT = { location = { has_province_modifier = secret_hellenic_pagan_community } }
				}
				AND = {
					FROM = {
						society_member_of = secret_religious_society_taoist
					}
					NOT = { location = { religion = taoist } }
					NOT = { location = { has_province_modifier = secret_taoist_community } }
				}
				AND = {
					FROM = {
						society_member_of = secret_religious_society_hindu
					}
					NOT = { location = { religion = hindu } }
					NOT = { location = { has_province_modifier = secret_hindu_community } }
				}
				AND = {
					FROM = {
						society_member_of = secret_religious_society_buddhist
					}
					NOT = { location = { religion = buddhist } }
					NOT = { location = { has_province_modifier = secret_buddhist_community } }
				}
				AND = {
					FROM = {
						society_member_of = secret_religious_society_jain
					}
					NOT = { location = { religion = jain } }
					NOT = { location = { has_province_modifier = secret_jain_community } }
				}
				AND = {
					FROM = {
						society_member_of = secret_religious_society_norse_pagan_reformed
					}
					NOT = { location = { religion = norse_pagan_reformed } }
					NOT = { location = { has_province_modifier = secret_norse_pagan_reformed_community } }
				}
				AND = {
					FROM = {
						society_member_of = secret_religious_society_norse_pagan
					}
					NOT = { location = { religion = norse_pagan } }
					NOT = { location = { has_province_modifier = secret_norse_pagan_community } }
				}
				AND = {
					FROM = {
						society_member_of = secret_religious_society_slavic_pagan_reformed
					}
					NOT = { location = { religion = slavic_pagan_reformed } }
					NOT = { location = { has_province_modifier = secret_slavic_pagan_reformed_community } }
				}
				AND = {
					FROM = {
						society_member_of = secret_religious_society_slavic_pagan
					}
					NOT = { location = { religion = slavic_pagan } }
					NOT = { location = { has_province_modifier = secret_slavic_pagan_community } }
				}
				AND = {
					FROM = {
						society_member_of = secret_religious_society_tengri_pagan_reformed
					}
					NOT = { location = { religion = tengri_pagan_reformed } }
					NOT = { location = { has_province_modifier = secret_tengri_pagan_reformed_community } }
				}
				AND = {
					FROM = {
						society_member_of = secret_religious_society_tengri_pagan
					}
					NOT = { location = { religion = tengri_pagan } }
					NOT = { location = { has_province_modifier = secret_tengri_pagan_community } }
				}
				AND = {
					FROM = {
						society_member_of = secret_religious_society_baltic_pagan_reformed
					}
					NOT = { location = { religion = baltic_pagan_reformed } }
					NOT = { location = { has_province_modifier = secret_baltic_pagan_reformed_community } }
				}
				AND = {
					FROM = {
						society_member_of = secret_religious_society_baltic_pagan
					}
					NOT = { location = { religion = baltic_pagan } }
					NOT = { location = { has_province_modifier = secret_baltic_pagan_community } }
				}
				AND = {
					FROM = {
						society_member_of = secret_religious_society_finnish_pagan_reformed
					}
					NOT = { location = { religion = finnish_pagan_reformed } }
					NOT = { location = { has_province_modifier = secret_finnish_pagan_reformed_community } }
				}
				AND = {
					FROM = {
						society_member_of = secret_religious_society_finnish_pagan
					}
					NOT = { location = { religion = finnish_pagan } }
					NOT = { location = { has_province_modifier = secret_finnish_pagan_community } }
				}
				AND = {
					FROM = {
						society_member_of = secret_religious_society_west_african_pagan_reformed
					}
					NOT = { location = { religion = west_african_pagan_reformed } }
					NOT = { location = { has_province_modifier = secret_west_african_pagan_reformed_community } }
				}
				AND = {
					FROM = {
						society_member_of = secret_religious_society_west_african_pagan
					}
					NOT = { location = { religion = west_african_pagan } }
					NOT = { location = { has_province_modifier = secret_west_african_pagan_community } }
				}
				AND = {
					FROM = {
						society_member_of = secret_religious_society_zun_pagan_reformed
					}
					NOT = { location = { religion = zun_pagan_reformed } }
					NOT = { location = { has_province_modifier = secret_zun_pagan_reformed_community } }
				}
				AND = {
					FROM = {
						society_member_of = secret_religious_society_zun_pagan
					}
					NOT = { location = { religion = zun_pagan } }
					NOT = { location = { has_province_modifier = secret_zun_pagan_community } }
				}

				### ACR ###
				AND = {
					FROM = {
						society_member_of = secret_religious_society_celtic_pagan
					}
					NOT = { location = { religion = celtic_pagan } }
					NOT = { location = { has_province_modifier = secret_celtic_pagan_community } }
				}
				AND = {
					FROM = {
						society_member_of = secret_religious_society_celtic_pagan_reformed
					}
					NOT = { location = { religion = celtic_pagan_reformed } }
					NOT = { location = { has_province_modifier = secret_celtic_pagan_reformed_community } }
				}
				AND = {
					FROM = {
						society_member_of = secret_religious_society_egyptian_pagan
					}
					NOT = { location = { religion = egyptian_pagan } }
					NOT = { location = { has_province_modifier = secret_egyptian_pagan_community } }
				}
				AND = {
					FROM = {
						society_member_of = secret_religious_society_aten_pagan
					}
					NOT = { location = { religion = aten_pagan } }
					NOT = { location = { has_province_modifier = secret_aten_pagan_community } }
				}
			}
		}
		
		allow = {
			FROM = {
				prisoner = no
				NOT = { trait = incapable }
				NOT = { is_inaccessible_trigger = yes }
				has_society_currency_medium_trigger = yes
			}
			custom_tooltip = {
				text = prepare_grounds_allow_tooltip
				hidden_trigger = {	
					location = {
						ROOT_FROM = { 
							NOT = { has_character_flag = preparing_grounds_in_@PREV }
						}
					}
				}
			}
		}
		
		effect = {
			location = {
				save_event_target_as = target_province
			}
			FROM = {
				society = {
					save_event_target_as = original_society
				}
				if = {
					limit = { 
						ai = no
					}
					detract_society_currency_medium_effect = yes
				}
				custom_tooltip = {
					text = secret_religions_prepare_grounds_effect_tooltip
					character_event = { id = MNM.3850 days = 2 }
				}
			}
			FROM = { 
				if = { 
					limit = {
						is_society_grandmaster = yes
					}
					increase_visibility_minor_effect = yes
				}
				if = {
					limit = {
						NOT = { is_society_grandmaster = yes }
					}
					increase_visibility_effect = yes
				}
				set_character_flag = preparing_grounds_in_@event_target:target_province
				character_event = { id = MNM.3849 days = 1200 }
			}
		}
		
		ai_will_do = {
			factor = 1
			modifier = {
				factor = 0.1
			}
		}
	}
}

#########################################################################################################
################ Secret society normal decisions
#########################################################################################################
decisions = {
	secret_religions_found_secret_religious_society = {
		only_playable = yes
		
		is_high_prio = yes
	
		potential = {
			has_secret_religion = yes
			secret_religious_cult = { # Has no members
				NOT = {
					any_society_member = { always = yes }
				}
			}
			NOT = {
				has_game_rule = {
					name = secret_cults
					value = none
				}
			}
		}
		
		allow = {
			is_adult = yes
			prestige = 250
			NOT = { is_in_society = yes }
			prisoner = no
			NOT = { trait = incapable }
			NOT = { is_inaccessible_trigger = yes }
		}
		
		effect = {
			#hidden_effect = { # To track the number of Founded Cults
			#	change_variable = { which = global_founded_cults value = 1 }
			#	if = {
			#		limit = {
			#			secret_religion = catholic
			#		}
			#		change_variable = { which = global_catholic_founded_cults value = 1 }
			#	}
			#	if = {
			#		limit = {
			#			secret_religion = cathar
			#		}
			#		change_variable = { which = global_cathar_founded_cults value = 1 }
			#	}
			#	if = {
			#		limit = {
			#			secret_religion = fraticelli
			#		}
			#		change_variable = { which = global_fraticelli_founded_cults value = 1 }
			#	}
			#	if = {
			#		limit = {
			#			secret_religion = waldensian
			#		}
			#		change_variable = { which = global_waldensian_founded_cults value = 1 }
			#	}
			#	if = {
			#		limit = {
			#			secret_religion = lollard
			#		}
			#		change_variable = { which = global_lollard_founded_cults value = 1 }
			#	}
			#	if = {
			#		limit = {
			#			secret_religion = orthodox
			#		}
			#		change_variable = { which = global_orthodox_founded_cults value = 1 }
			#	}
			#	if = {
			#		limit = {
			#			secret_religion = miaphysite
			#		}
			#		change_variable = { which = global_miaphysite_founded_cults value = 1 }
			#	}
			#	if = {
			#		limit = {
			#			secret_religion = monophysite
			#		}
			#		change_variable = { which = global_monophysite_founded_cults value = 1 }
			#	}
			#	if = {
			#		limit = {
			#			secret_religion = bogomilist
			#		}
			#		change_variable = { which = global_bogomilist_founded_cults value = 1 }
			#	}
			#	if = {
			#		limit = {
			#			secret_religion = monothelite
			#		}
			#		change_variable = { which = global_monothelite_founded_cults value = 1 }
			#	}
			#	if = {
			#		limit = {
			#			secret_religion = iconoclast
			#		}
			#		change_variable = { which = global_iconoclast_founded_cults value = 1 }
			#	}
			#	if = {
			#		limit = {
			#			secret_religion = paulician
			#		}
			#		change_variable = { which = global_paulician_founded_cults value = 1 }
			#	}
			#	if = {
			#		limit = {
			#			secret_religion = nestorian
			#		}
			#		change_variable = { which = global_nestorian_founded_cults value = 1 }
			#	}
			#	if = {
			#		limit = {
			#			secret_religion = messalian
			#		}
			#		change_variable = { which = global_messalian_founded_cults value = 1 }
			#	}
			#	if = {
			#		limit = {
			#			secret_religion = sunni
			#		}
			#		change_variable = { which = global_sunni_founded_cults value = 1 }
			#	}
			#	if = {
			#		limit = {
			#			secret_religion = zikri
			#		}
			#		change_variable = { which = global_zikri_founded_cults value = 1 }
			#	}
			#	if = {
			#		limit = {
			#			secret_religion = yazidi
			#		}
			#		change_variable = { which = global_yazidi_founded_cults value = 1 }
			#	}
			#	if = {
			#		limit = {
			#			secret_religion = ibadi
			#		}
			#		change_variable = { which = global_ibadi_founded_cults value = 1 }
			#	}
			#	if = {
			#		limit = {
			#			secret_religion = kharijite
			#		}
			#		change_variable = { which = global_kharijite_founded_cults value = 1 }
			#	}
			#	if = {
			#		limit = {
			#			secret_religion = shiite
			#		}
			#		change_variable = { which = global_shiite_founded_cults value = 1 }
			#	}
			#	if = {
			#		limit = {
			#			secret_religion = druze
			#		}
			#		change_variable = { which = global_druze_founded_cults value = 1 }
			#	}
			#	if = {
			#		limit = {
			#			secret_religion = hurufi
			#		}
			#		change_variable = { which = global_hurufi_founded_cults value = 1 }
			#	}
			#	if = {
			#		limit = {
			#			secret_religion = jewish
			#		}
			#		change_variable = { which = global_jewish_founded_cults value = 1 }
			#	}
			#	if = {
			#		limit = {
			#			secret_religion = karaite
			#		}
			#		change_variable = { which = global_karaite_founded_cults value = 1 }
			#	}
			#	if = {
			#		limit = {
			#			secret_religion = samaritan
			#		}
			#		change_variable = { which = global_samaritan_founded_cults value = 1 }
			#	}
			#	if = {
			#		limit = {
			#			secret_religion = zoroastrian
			#		}
			#		change_variable = { which = global_zoroastrian_founded_cults value = 1 }
			#	}
			#	if = {
			#		limit = {
			#			secret_religion = mazdaki
			#		}
			#		change_variable = { which = global_mazdaki_founded_cults value = 1 }
			#	}
			#	if = {
			#		limit = {
			#			secret_religion = manichean
			#		}
			#		change_variable = { which = global_manichean_founded_cults value = 1 }
			#	}
			#	if = {
			#		limit = {
			#			secret_religion = khurmazta
			#		}
			#		change_variable = { which = global_khurmazta_founded_cults value = 1 }
			#	}
			#	if = {
			#		limit = {
			#			secret_religion = bon
			#		}
			#		change_variable = { which = global_bon_founded_cults value = 1 }
			#	}
			#	if = {
			#		limit = {
			#			secret_religion = taoist
			#		}
			#		change_variable = { which = global_taoist_founded_cults value = 1 }
			#	}
			#	if = {
			#		limit = {
			#			secret_religion = hindu
			#		}
			#		change_variable = { which = global_hindu_founded_cults value = 1 }
			#	}
			#	if = {
			#		limit = {
			#			secret_religion = buddhist
			#		}
			#		change_variable = { which = global_buddhist_founded_cults value = 1 }
			#	}
			#	if = {
			#		limit = {
			#			secret_religion = jain
			#		}
			#		change_variable = { which = global_jain_founded_cults value = 1 }
			#	}
			#	if = {
			#		limit = {
			#			secret_religion = norse_pagan_reformed
			#		}
			#		change_variable = { which = global_norse_pagan_reformed_founded_cults value = 1 }
			#	}
			#	if = {
			#		limit = {
			#			secret_religion = norse_pagan
			#		}
			#		change_variable = { which = global_norse_pagan_founded_cults value = 1 }
			#	}
			#	if = {
			#		limit = {
			#			secret_religion = baltic_pagan_reformed
			#		}
			#		change_variable = { which = global_baltic_pagan_reformed_founded_cults value = 1 }
			#	}
			#	if = {
			#		limit = {
			#			secret_religion = baltic_pagan
			#		}
			#		change_variable = { which = global_baltic_pagan_founded_cults value = 1 }
			#	}
			#	if = {
			#		limit = {
			#			secret_religion = finnish_pagan_reformed
			#		}
			#		change_variable = { which = global_finnish_pagan_reformed_founded_cults value = 1 }
			#	}
			#	if = {
			#		limit = {
			#			secret_religion = finnish_pagan
			#		}
			#		change_variable = { which = global_finnish_pagan_founded_cults value = 1 }
			#	}
			#	if = {
			#		limit = {
			#			secret_religion = slavic_pagan_reformed
			#		}
			#		change_variable = { which = global_slavic_pagan_reformed_founded_cults value = 1 }
			#	}
			#	if = {
			#		limit = {
			#			secret_religion = slavic_pagan
			#		}
			#		change_variable = { which = global_slavic_pagan_founded_cults value = 1 }
			#	}
			#	if = {
			#		limit = {
			#			secret_religion = tengri_pagan_reformed
			#		}
			#		change_variable = { which = global_tengri_pagan_reformed_founded_cults value = 1 }
			#	}
			#	if = {
			#		limit = {
			#			secret_religion = tengri_pagan
			#		}
			#		change_variable = { which = global_tengri_pagan_founded_cults value = 1 }
			#	}
			#	if = {
			#		limit = {
			#			secret_religion = west_african_pagan_reformed
			#		}
			#		change_variable = { which = global_west_african_pagan_reformed_founded_cults value = 1 }
			#	}
			#	if = {
			#		limit = {
			#			secret_religion = west_african_pagan
			#		}
			#		change_variable = { which = global_west_african_pagan_founded_cults value = 1 }
			#	}
			#	if = {
			#		limit = {
			#			secret_religion = zun_pagan_reformed
			#		}
			#		change_variable = { which = global_zun_pagan_reformed_founded_cults value = 1 }
			#	}
			#	if = {
			#		limit = {
			#			secret_religion = zun_pagan
			#		}
			#		change_variable = { which = global_zun_pagan_founded_cults value = 1 }
			#	}
			#	if = {
			#		limit = {
			#			secret_religion = aztec
			#		}
			#		change_variable = { which = global_aztec_founded_cults value = 1 }
			#	}
			#	if = {
			#		limit = {
			#			secret_religion = aztec_reformed
			#		}
			#		change_variable = { which = global_aztec_reformed_founded_cults value = 1 }
			#	}
			#}
			character_event = { id = MNM.3950 }
			prestige = -250
			join_society = secret_religious_cult
			set_society_grandmaster = yes # Set character as Grand Master
			if = { 
				limit = { 
					NOT = { 
						secret_religion = hellenic_pagan
					}
				}
				custom_tooltip = { text = tooltip_add_massive_society_currency } 
			}
			if = { 
				limit = { 
					secret_religion = hellenic_pagan
				}
				custom_tooltip = { text = tooltip_add_massive_hellenic_society_currency } 
			}
			hidden_tooltip = { add_society_currency_massive_effect = yes } # Give the Grand Master a start-up capital to induct members
		}
		
		revoke_allowed = {
			always = no
		}
		
		ai_will_do = {
			factor = 0.1
			
			modifier = {
				factor = 0.03 # Slow down
			}
			modifier = {
				factor = 2
				OR = {
					top_liege = { # If the characters top liege is a player
						ai = no
					}
					top_liege = {
						any_realm_lord = { # If there is a player vassal in the same realm that is not secretly religious
							ai = no
							independent = no
							has_secret_religion_trait_trigger = no
						}
					}
				}
			}
			modifier = {
				factor = 0.1
				NOT = {
					trait = zealous
				}
			}
			modifier = {
				factor = 0.1
				OR = {
					trait = content
					trait = trusting
					trait = shy
				}
			}
			modifier = { # Do not create more than one society per realm
				factor = 0
				any_realm_lord = {
					society_member_of = secret_religious_cult
				}
			}
			modifier = {
				factor = 0
				any_player = {
					shares_prevs_secret_religion_trigger = yes
				}
			}
		}
	}
	
	secret_religions_falsely_confess_faith = {
	
		is_high_prio = yes
	
		only_playable = yes
		
		potential = {
			OR = {
				liege = {
					NOT = {
						religion = ROOT
					}
				}
				top_liege = {
					NOT = {
						religion = ROOT
					}
				}
			}
			NOT = { controls_religion = yes }
		}
		allow = {
			piety = 100
			prisoner = no
			NOT = { trait = incapable }
			NOT = { is_inaccessible_trigger = yes }
		}
		effect = {
			character_event = { id = MNM.3951 days = 1 }
			if = {
				limit = { has_secret_religion = yes }
				secret_religion_scope = { save_event_target_as = actual_religion }
				piety = -50
				custom_tooltip = { text = confess_faith_already_has_secret_rel_tt }
			}
			else = {
				religion_scope = { save_event_target_as = actual_religion }
				piety = -100
				hidden_effect = {
					set_secret_religion = event_target:actual_religion # This has to actually happen after the religion is set
				}
			}
			custom_tooltip = {
				text = confess_faith_decision_tooltip
				hidden_effect = {
					if = {
						limit = {
							liege = {
								NOT = {
									religion = ROOT
								}
							}
						}
						liege = {
							religion_scope = { save_event_target_as = false_religion }
						}
					}
					else_if = {
						limit = {
							top_liege = {
								NOT = {
									religion = ROOT
								}
							}
						}
						top_liege = {
							religion_scope = { save_event_target_as = false_religion }
						}
					}
					ROOT = {
						religion = event_target:false_religion
						set_secret_religion = event_target:actual_religion
					}
				}
			}
			custom_tooltip = {
				text = confess_faith_courtiers_decision_tooltip
				hidden_effect = {
					any_courtier = {
						limit = {
							religion = event_target:actual_religion
							employer = { character = ROOT }
							NOT = { trait = zealous }
							NOT = { has_secret_religion = yes }
						}
						random = {
							chance = 50
							modifier = {
								factor = 1.5
								is_close_relative = yes
							}
							modifier = {
								factor = 1.2
								trait = cynical
							}
							religion = event_target:false_religion
							set_secret_religion = event_target:actual_religion
						}
					}
				}
			}
		}
		revoke_allowed = {
			always = no
		}
		
		ai_will_do = {
			factor = 0
		}
	}
}

title_decisions = {
	secretly_convert_to_province_religion = {
		filter = owned
		ai_target_filter = self
		
		only_playable = yes
		
		from_potential = {
			ai = no
			NOT = { controls_religion = yes }
		}
		
		potential = {
			tier = COUNT
			NOT = { location = { religion = FROM } }
			NOT = { location = { religion = { target_type = secret target = FROM } } }
			owner = { character = FROM }
			location = {
				dlc_religion_check_trigger = yes
			}
		}
		
		allow = {
			FROM = { 
				piety = 250
				prisoner = no
				NOT = { trait = incapable }
				NOT = { is_inaccessible_trigger = yes }
				NOT = { society_member_of = secret_religious_cult }
			}
		}
		
		effect = {
			location = { save_event_target_as = location }
			FROM = {
				set_secret_religion = event_target:location
				piety = -250
			}
		}
		
		revoke_allowed = {
			always = no
		}
		
		ai_will_do = {
			factor = 0
		}
	}
	
	secretly_convert_to_catholic_holy_site = {
		filter = owned
		ai_target_filter = self
	
		only_playable = yes
		
		from_potential = {
			ai = no
			NOT = { trait = incapable }
			NOT = { secret_religion = catholic }
			has_global_flag = great_schism
			NOT = { religion = catholic }
			NOT = { controls_religion = yes }
			NOT = {
				has_alternate_start_parameter = { key = religion_names value = random }
			}
		}
		
		potential = {
			tier = COUNT
			NOT = {
				location = { religion = catholic }
			}
			OR = {
				is_holy_site = catholic
				any_de_jure_vassal_title = {
					is_holy_site = catholic
				}
			}
			OR = {
				holder_scope = {
					character = FROM
				}
				AND = {
					tier = BARON
					holder_scope = {
						liege = {
							character = FROM
						}
					}
				}
			}
		}
		
		allow = {
			FROM = {
				piety = 250
				prisoner = no
				NOT = { trait = incapable }
				NOT = { is_inaccessible_trigger = yes }
				NOT = { society_member_of = secret_religious_cult }
			}
		}
		
		effect = {
			FROM = {
				piety = -250
				set_secret_religion = catholic
			}
		}
		
		revoke_allowed = {
			always = no
		}
		
		ai_will_do = {
			factor = 0
		}
	}
	
	secretly_convert_to_orthodox_holy_site = {
		filter = owned
		ai_target_filter = self
	
		only_playable = yes
		
		from_potential = {
			ai = no
			NOT = { trait = incapable }
			NOT = { secret_religion = orthodox }
			has_global_flag = great_schism
			NOT = { religion = orthodox }
			NOT = { controls_religion = yes }
			NOT = {
				has_alternate_start_parameter = { key = religion_names value = random }
			}
		}
		
		potential = {
			tier = COUNT
			NOT = {
				location = { religion = orthodox }
			}
			OR = {
				is_holy_site = orthodox
				any_de_jure_vassal_title = {
					is_holy_site = orthodox
				}
			}
			OR = {
				holder_scope = {
					character = FROM
				}
				AND = {
					tier = BARON
					holder_scope = {
						liege = {
							character = FROM
						}
					}
				}
			}
		}
		
		allow = {
			FROM = {
				piety = 250
				prisoner = no
				NOT = { trait = incapable }
				NOT = { is_inaccessible_trigger = yes }
				NOT = { society_member_of = secret_religious_cult }
			}
		}
		
		effect = {
			FROM = {
				piety = -250
				set_secret_religion = orthodox
			}
		}
		
		revoke_allowed = {
			always = no
		}
		
		ai_will_do = {
			factor = 0
		}
	}
	
	secretly_convert_to_miaphysite_holy_site = {
		filter = owned
		ai_target_filter = self
	
		only_playable = yes
		
		from_potential = {
			ai = no
			NOT = { trait = incapable }
			NOT = { secret_religion = miaphysite }
			NOT = { religion = miaphysite }
			NOT = { controls_religion = yes }
			NOT = {
				has_alternate_start_parameter = { key = religion_names value = random }
			}
		}
		
		potential = {
			tier = COUNT
			NOT = {
				location = { religion = miaphysite }
			}
			OR = {
				is_holy_site = miaphysite
				any_de_jure_vassal_title = {
					is_holy_site = miaphysite
				}
			}
			OR = {
				holder_scope = {
					character = FROM
				}
				AND = {
					tier = BARON
					holder_scope = {
						liege = {
							character = FROM
						}
					}
				}
			}
		}
		
		allow = {
			FROM = {
				piety = 250
				prisoner = no
				NOT = { trait = incapable }
				NOT = { is_inaccessible_trigger = yes }
				NOT = { society_member_of = secret_religious_cult }
			}
		}
		
		effect = {
			FROM = {
				piety = -250
				set_secret_religion = miaphysite
			}
		}
		
		revoke_allowed = {
			always = no
		}
		
		ai_will_do = {
			factor = 0
		}
	}
	
	secretly_convert_to_nestorian_holy_site = {
		filter = owned
		ai_target_filter = self
	
		only_playable = yes
		
		from_potential = {
			ai = no
			NOT = { trait = incapable }
			NOT = { secret_religion = nestorian }
			NOT = { religion = nestorian }
			NOT = { controls_religion = yes }
			NOT = {
				has_alternate_start_parameter = { key = religion_names value = random }
			}
		}
		
		potential = {
			tier = COUNT
			NOT = {
				location = { religion = nestorian }
			}
			OR = {
				is_holy_site = nestorian
				any_de_jure_vassal_title = {
					is_holy_site = nestorian
				}
			}
			OR = {
				holder_scope = {
					character = FROM
				}
				AND = {
					tier = BARON
					holder_scope = {
						liege = {
							character = FROM
						}
					}
				}
			}
		}
		
		allow = {
			FROM = {
				piety = 250
				prisoner = no
				NOT = { trait = incapable }
				NOT = { is_inaccessible_trigger = yes }
				NOT = { society_member_of = secret_religious_cult }
			}
		}
		
		effect = {
			FROM = {
				piety = -250
				set_secret_religion = nestorian
			}
		}
		
		revoke_allowed = {
			always = no
		}
		
		ai_will_do = {
			factor = 0
		}
	}
	
	secretly_convert_to_sunni_holy_site = {
		filter = owned
		ai_target_filter = self
	
		only_playable = yes
		
		from_potential = {
			ai = no
			NOT = { trait = incapable }
			NOT = { secret_religion = sunni }
			has_global_flag = sunni_shiite_split
			NOT = { religion = sunni }
			NOT = { controls_religion = yes }
			NOT = {
				has_alternate_start_parameter = { key = religion_names value = random }
			}
		}
		
		potential = {
			has_dlc = "The Sword of Islam"
			tier = COUNT
			NOT = {
				location = { religion = sunni }
			}
			OR = {
				is_holy_site = sunni
				any_de_jure_vassal_title = {
					is_holy_site = sunni
				}
			}
			OR = {
				holder_scope = {
					character = FROM
				}
				AND = {
					tier = BARON
					holder_scope = {
						liege = {
							character = FROM
						}
					}
				}
			}
		}
		
		allow = {
			FROM = {
				piety = 250
				prisoner = no
				NOT = { trait = incapable }
				NOT = { is_inaccessible_trigger = yes }
				NOT = { society_member_of = secret_religious_cult }
			}
		}
		
		effect = {
			FROM = {
				piety = -250
				set_secret_religion = sunni
			}
		}
		
		revoke_allowed = {
			always = no
		}
		
		ai_will_do = {
			factor = 0
		}
	}
	
	secretly_convert_to_shiite_holy_site = {
		filter = owned
		ai_target_filter = self
	
		only_playable = yes
		
		from_potential = {
			ai = no
			NOT = { trait = incapable }
			NOT = { secret_religion = shiite }
			has_global_flag = sunni_shiite_split
			NOT = { religion = shiite }
			NOT = { controls_religion = yes }
			NOT = {
				has_alternate_start_parameter = { key = religion_names value = random }
			}
		}
		
		potential = {
			has_dlc = "The Sword of Islam"
			tier = COUNT
			NOT = {
				location = { religion = shiite }
			}
			OR = {
				is_holy_site = shiite
				any_de_jure_vassal_title = {
					is_holy_site = shiite
				}
			}
			OR = {
				holder_scope = {
					character = FROM
				}
				AND = {
					tier = BARON
					holder_scope = {
						liege = {
							character = FROM
						}
					}
				}
			}
		}
		
		allow = {
			FROM = {
				piety = 250
				prisoner = no
				NOT = { trait = incapable }
				NOT = { is_inaccessible_trigger = yes }
				NOT = { society_member_of = secret_religious_cult }
			}
		}
		
		effect = {
			FROM = {
				piety = -250
				set_secret_religion = shiite
			}
		}
		
		revoke_allowed = {
			always = no
		}
		
		ai_will_do = {
			factor = 0
		}
	}
	
	secretly_convert_to_ibadi_holy_site = {
		filter = owned
		ai_target_filter = self
	
		only_playable = yes
		
		from_potential = {
			ai = no
			NOT = { trait = incapable }
			NOT = { secret_religion = ibadi }
			has_global_flag = sunni_shiite_split
			NOT = { religion = ibadi }
			NOT = { controls_religion = yes }
			NOT = {
				has_alternate_start_parameter = { key = religion_names value = random }
			}
		}
		
		potential = {
			has_dlc = "The Sword of Islam"
			tier = COUNT
			NOT = {
				location = { religion = ibadi }
			}
			OR = {
				is_holy_site = ibadi
				any_de_jure_vassal_title = {
					is_holy_site = ibadi
				}
			}
			OR = {
				holder_scope = {
					character = FROM
				}
				AND = {
					tier = BARON
					holder_scope = {
						liege = {
							character = FROM
						}
					}
				}
			}
		}
		
		allow = {
			FROM = {
				piety = 250
				prisoner = no
				NOT = { trait = incapable }
				NOT = { is_inaccessible_trigger = yes }
				NOT = { society_member_of = secret_religious_cult }
			}
		}
		
		effect = {
			FROM = {
				piety = -250
				set_secret_religion = ibadi
			}
		}
		
		revoke_allowed = {
			always = no
		}
		
		ai_will_do = {
			factor = 0
		}
	}
	
	secretly_convert_to_jewish_holy_site = {
		filter = owned
		ai_target_filter = self
	
		only_playable = yes
		
		from_potential = {
			ai = no
			NOT = { trait = incapable }
			NOT = { secret_religion = jewish }
			NOT = { religion = jewish }
			NOT = { controls_religion = yes }
			NOT = {
				has_alternate_start_parameter = { key = religion_names value = random }
			}
		}
		
		potential = {
			has_dlc = "Sons of Abraham"
			tier = COUNT
			NOT = {
				location = { religion = jewish }
			}
			OR = {
				is_holy_site = jewish
				any_de_jure_vassal_title = {
					is_holy_site = jewish
				}
			}
			OR = {
				holder_scope = {
					character = FROM
				}
				AND = {
					tier = BARON
					holder_scope = {
						liege = {
							character = FROM
						}
					}
				}
			}
		}
		
		allow = {
			FROM = {
				piety = 250
				prisoner = no
				NOT = { trait = incapable }
				NOT = { is_inaccessible_trigger = yes }
				NOT = { society_member_of = secret_religious_cult }
			}
		}
		
		effect = {
			FROM = {
				piety = -250
				set_secret_religion = jewish
			}
		}
		
		revoke_allowed = {
			always = no
		}
		
		ai_will_do = {
			factor = 0
		}
	}
	
	secretly_convert_to_zoroastrian_holy_site = {
		filter = owned
		ai_target_filter = self
	
		only_playable = yes
		
		from_potential = {
			ai = no
			NOT = { trait = incapable }
			NOT = { secret_religion = zoroastrian }
			NOT = { religion = zoroastrian }
			NOT = { controls_religion = yes }
			NOT = {
				has_alternate_start_parameter = { key = religion_names value = random }
			}
		}
		
		potential = {
			has_dlc = "The Old Gods"
			tier = COUNT
			NOT = {
				location = { religion = zoroastrian }
			}
			OR = {
				is_holy_site = zoroastrian
				any_de_jure_vassal_title = {
					is_holy_site = zoroastrian
				}
			}
			OR = {
				holder_scope = {
					character = FROM
				}
				AND = {
					tier = BARON
					holder_scope = {
						liege = {
							character = FROM
						}
					}
				}
			}
		}
		
		allow = {
			FROM = {
				piety = 250
				prisoner = no
				NOT = { trait = incapable }
				NOT = { is_inaccessible_trigger = yes }
				NOT = { society_member_of = secret_religious_cult }
			}
		}
		
		effect = {
			FROM = {
				piety = -250
				set_secret_religion = zoroastrian
			}
		}
		
		revoke_allowed = {
			always = no
		}
		
		ai_will_do = {
			factor = 0
		}
	}
	
	secretly_convert_to_hindu_holy_site = {
		filter = owned
		ai_target_filter = self
	
		only_playable = yes
		
		from_potential = {
			ai = no
			NOT = { trait = incapable }
			NOT = { secret_religion = hindu }
			NOT = { religion = hindu }
			NOT = { controls_religion = yes }
			NOT = {
				has_alternate_start_parameter = { key = religion_names value = random }
			}
		}
		
		potential = {
			has_dlc = "Rajas of India"
			tier = COUNT
			NOT = {
				location = { religion = hindu }
			}
			OR = {
				is_holy_site = hindu
				any_de_jure_vassal_title = {
					is_holy_site = hindu
				}
			}
			OR = {
				holder_scope = {
					character = FROM
				}
				AND = {
					tier = BARON
					holder_scope = {
						liege = {
							character = FROM
						}
					}
				}
			}
		}
		
		allow = {
			FROM = {
				piety = 250
				prisoner = no
				NOT = { trait = incapable }
				NOT = { is_inaccessible_trigger = yes }
				NOT = { society_member_of = secret_religious_cult }
			}
		}
		
		effect = {
			FROM = {
				piety = -250
				set_secret_religion = hindu
			}
		}
		
		revoke_allowed = {
			always = no
		}
		
		ai_will_do = {
			factor = 0
		}
	}
	
	secretly_convert_to_buddhist_holy_site = {
		filter = owned
		ai_target_filter = self
	
		only_playable = yes
		
		from_potential = {
			ai = no
			NOT = { trait = incapable }
			NOT = { secret_religion = buddhist }
			NOT = { religion = buddhist }
			NOT = { controls_religion = yes }
			NOT = {
				has_alternate_start_parameter = { key = religion_names value = random }
			}
		}
		
		potential = {
			has_dlc = "Rajas of India"
			tier = COUNT
			NOT = {
				location = { religion = buddhist }
			}
			OR = {
				is_holy_site = buddhist
				any_de_jure_vassal_title = {
					is_holy_site = buddhist
				}
			}
			OR = {
				holder_scope = {
					character = FROM
				}
				AND = {
					tier = BARON
					holder_scope = {
						liege = {
							character = FROM
						}
					}
				}
			}
		}
		
		allow = {
			FROM = {
				piety = 250
				prisoner = no
				NOT = { trait = incapable }
				NOT = { is_inaccessible_trigger = yes }
				NOT = { society_member_of = secret_religious_cult }
			}
		}
		
		effect = {
			FROM = {
				piety = -250
				set_secret_religion = buddhist
			}
		}
		
		revoke_allowed = {
			always = no
		}
		
		ai_will_do = {
			factor = 0
		}
	}

	secretly_convert_to_bon_holy_site = {
		filter = owned
		ai_target_filter = self
	
		only_playable = yes
		
		from_potential = {
			ai = no
			NOT = { trait = incapable }
			NOT = { secret_religion = bon }
			NOT = { has_global_flag = bon_reformation }
			NOT = { religion = bon }
			NOT = { controls_religion = yes }
			NOT = {
				has_alternate_start_parameter = { key = religion_names value = random }
			}
		}
		
		potential = {
			OR = {
				has_dlc = "The Old Gods"
				has_dlc = "Holy Fury"
				has_dlc = "Jade Dragon"
			}
			tier = COUNT
			NOT = {
				location = { religion = norse_pagan }
			}
			OR = {
				is_holy_site = bon
				any_de_jure_vassal_title = {
					is_holy_site = bon
				}
			}
			OR = {
				holder_scope = {
					character = FROM
				}
				AND = {
					tier = BARON
					holder_scope = {
						liege = {
							character = FROM
						}
					}
				}
			}
		}
		
		allow = {
			FROM = {
				piety = 250
				prisoner = no
				NOT = { trait = incapable }
				NOT = { is_inaccessible_trigger = yes }
				NOT = { society_member_of = secret_religious_cult }
			}
		}
		
		effect = {
			FROM = {
				piety = -250
				set_secret_religion = bon
			}
		}
		
		revoke_allowed = {
			always = no
		}
		
		ai_will_do = {
			factor = 0
		}
	}

	secretly_convert_to_bon_reformed_holy_site = {
		filter = owned
		ai_target_filter = self
	
		only_playable = yes
		
		from_potential = {
			ai = no
			NOT = { trait = incapable }
			NOT = { secret_religion = bon_reformed }
			has_global_flag = bon_reformation
			NOT = { religion = bon_reformed }
			NOT = { controls_religion = yes }
			NOT = {
				has_alternate_start_parameter = { key = religion_names value = random }
			}
		}
		
		potential = {
			OR = {
				has_dlc = "The Old Gods"
				has_dlc = "Holy Fury"
				has_dlc = "Jade Dragon"
			}
			tier = COUNT
			NOT = {
				location = { religion = bon_reformed }
			}
			OR = {
				is_holy_site = bon_reformed
				any_de_jure_vassal_title = {
					is_holy_site = bon_reformed
				}
			}
			OR = {
				holder_scope = {
					character = FROM
				}
				AND = {
					tier = BARON
					holder_scope = {
						liege = {
							character = FROM
						}
					}
				}
			}
		}
		
		allow = {
			FROM = {
				piety = 250
				prisoner = no
				NOT = { trait = incapable }
				NOT = { is_inaccessible_trigger = yes }
				NOT = { society_member_of = secret_religious_cult }
			}
		}
		
		effect = {
			FROM = {
				piety = -250
				set_secret_religion = bon_reformed
			}
		}
		
		revoke_allowed = {
			always = no
		}
		
		ai_will_do = {
			factor = 0
		}
	}

	secretly_convert_to_taoist_holy_site = {
		filter = owned
		ai_target_filter = self
	
		only_playable = yes
		
		from_potential = {
			ai = no
			NOT = { trait = incapable }
			NOT = { secret_religion = taoist }
			NOT = { religion = taoist }
			NOT = { controls_religion = yes }
			is_alternate_start = yes
		}
		
		potential = {
			OR = {
				has_dlc = "Rajas of India"
				has_dlc = "Jade Dragon"
			}
			tier = COUNT
			NOT = {
				location = { religion = taoist }
			}
			OR = {
				is_holy_site = taoist
				any_de_jure_vassal_title = {
					is_holy_site = taoist
				}
			}
			OR = {
				holder_scope = {
					character = FROM
				}
				AND = {
					tier = BARON
					holder_scope = {
						liege = {
							character = FROM
						}
					}
				}
			}
		}
		
		allow = {
			FROM = {
				piety = 250
				prisoner = no
				NOT = { trait = incapable }
				NOT = { is_inaccessible_trigger = yes }
				NOT = { society_member_of = secret_religious_cult }
			}
		}
		
		effect = {
			FROM = {
				piety = -250
				set_secret_religion = taoist
			}
		}
		
		revoke_allowed = {
			always = no
		}
		
		ai_will_do = {
			factor = 0
		}
	}
	
	secretly_convert_to_jain_holy_site = {
		filter = owned
		ai_target_filter = self
	
		only_playable = yes
		
		from_potential = {
			ai = no
			NOT = { trait = incapable }
			NOT = { secret_religion = jain }
			NOT = { religion = jain }
			NOT = { controls_religion = yes }
			NOT = {
				has_alternate_start_parameter = { key = religion_names value = random }
			}
		}
		
		potential = {
			has_dlc = "Rajas of India"
			tier = COUNT
			NOT = {
				location = { religion = jain }
			}
			OR = {
				is_holy_site = jain
				any_de_jure_vassal_title = {
					is_holy_site = jain
				}
			}
			OR = {
				holder_scope = {
					character = FROM
				}
				AND = {
					tier = BARON
					holder_scope = {
						liege = {
							character = FROM
						}
					}
				}
			}
		}
		
		allow = {
			FROM = {
				piety = 250
				prisoner = no
				NOT = { trait = incapable }
				NOT = { is_inaccessible_trigger = yes }
				NOT = { society_member_of = secret_religious_cult }
			}
		}
		
		effect = {
			FROM = {
				piety = -250
				set_secret_religion = jain
			}
		}
		
		revoke_allowed = {
			always = no
		}
		
		ai_will_do = {
			factor = 0
		}
	}
	
	secretly_convert_to_norse_pagan_holy_site = {
		filter = owned
		ai_target_filter = self
	
		only_playable = yes
		
		from_potential = {
			ai = no
			NOT = { trait = incapable }
			NOT = { secret_religion = norse_pagan }
			NOT = { has_global_flag = norse_reformation }
			NOT = { religion = norse_pagan }
			NOT = { controls_religion = yes }
			NOT = {
				has_alternate_start_parameter = { key = religion_names value = random }
			}
		}
		
		potential = {
			OR = {
				has_dlc = "The Old Gods"
				has_dlc = "Holy Fury"
			}
			tier = COUNT
			NOT = {
				location = { religion = norse_pagan }
			}
			OR = {
				is_holy_site = norse_pagan
				any_de_jure_vassal_title = {
					is_holy_site = norse_pagan
				}
			}
			OR = {
				holder_scope = {
					character = FROM
				}
				AND = {
					tier = BARON
					holder_scope = {
						liege = {
							character = FROM
						}
					}
				}
			}
		}
		
		allow = {
			FROM = {
				piety = 250
				prisoner = no
				NOT = { trait = incapable }
				NOT = { is_inaccessible_trigger = yes }
				NOT = { society_member_of = secret_religious_cult }
			}
		}
		
		effect = {
			FROM = {
				piety = -250
				set_secret_religion = norse_pagan
			}
		}
		
		revoke_allowed = {
			always = no
		}
		
		ai_will_do = {
			factor = 0
		}
	}
	
	secretly_convert_to_norse_pagan_reformed_holy_site = {
		filter = owned
		ai_target_filter = self
	
		only_playable = yes
		
		from_potential = {
			ai = no
			NOT = { trait = incapable }
			NOT = { secret_religion = norse_pagan_reformed }
			has_global_flag = norse_reformation
			NOT = { religion = norse_pagan_reformed }
			NOT = { controls_religion = yes }
			NOT = {
				has_alternate_start_parameter = { key = religion_names value = random }
			}
		}
		
		potential = {
			OR = {
				has_dlc = "The Old Gods"
				has_dlc = "Holy Fury"
			}
			tier = COUNT
			NOT = {
				location = { religion = norse_pagan_reformed }
			}
			OR = {
				is_holy_site = norse_pagan_reformed
				any_de_jure_vassal_title = {
					is_holy_site = norse_pagan_reformed
				}
			}
			OR = {
				holder_scope = {
					character = FROM
				}
				AND = {
					tier = BARON
					holder_scope = {
						liege = {
							character = FROM
						}
					}
				}
			}
		}
		
		allow = {
			FROM = {
				piety = 250
				prisoner = no
				NOT = { trait = incapable }
				NOT = { is_inaccessible_trigger = yes }
				NOT = { society_member_of = secret_religious_cult }
			}
		}
		
		effect = {
			FROM = {
				piety = -250
				set_secret_religion = norse_pagan_reformed
			}
		}
		
		revoke_allowed = {
			always = no
		}
		
		ai_will_do = {
			factor = 0
		}
	}
	
	secretly_convert_to_slavic_pagan_holy_site = {
		filter = owned
		ai_target_filter = self
	
		only_playable = yes
		
		from_potential = {
			ai = no
			NOT = { trait = incapable }
			NOT = { secret_religion = slavic_pagan }
			NOT = { has_global_flag = slavic_reformation }
			NOT = { religion = slavic_pagan }
			NOT = { controls_religion = yes }
			NOT = {
				has_alternate_start_parameter = { key = religion_names value = random }
			}
		}
		
		potential = {
			OR = {
				has_dlc = "The Old Gods"
				has_dlc = "Holy Fury"
			}
			tier = COUNT
			NOT = {
				location = { religion = slavic_pagan }
			}
			OR = {
				is_holy_site = slavic_pagan
				any_de_jure_vassal_title = {
					is_holy_site = slavic_pagan
				}
			}
			OR = {
				holder_scope = {
					character = FROM
				}
				AND = {
					tier = BARON
					holder_scope = {
						liege = {
							character = FROM
						}
					}
				}
			}
		}
		
		allow = {
			FROM = {
				piety = 250
				prisoner = no
				NOT = { trait = incapable }
				NOT = { is_inaccessible_trigger = yes }
				NOT = { society_member_of = secret_religious_cult }
			}
		}
		
		effect = {
			FROM = {
				piety = -250
				set_secret_religion = slavic_pagan
			}
		}
		
		revoke_allowed = {
			always = no
		}
		
		ai_will_do = {
			factor = 0
		}
	}
	
	secretly_convert_to_slavic_pagan_reformed_holy_site = {
		filter = owned
		ai_target_filter = self
	
		only_playable = yes
		
		from_potential = {
			ai = no
			NOT = { trait = incapable }
			NOT = { secret_religion = slavic_pagan_reformed }
			has_global_flag = slavic_reformation
			NOT = { religion = slavic_pagan_reformed }
			NOT = { controls_religion = yes }
			NOT = {
				has_alternate_start_parameter = { key = religion_names value = random }
			}
		}
		
		potential = {
			OR = {
				has_dlc = "The Old Gods"
				has_dlc = "Holy Fury"
			}
			tier = COUNT
			NOT = {
				location = { religion = slavic_pagan_reformed }
			}
			OR = {
				is_holy_site = slavic_pagan_reformed
				any_de_jure_vassal_title = {
					is_holy_site = slavic_pagan_reformed
				}
			}
			OR = {
				holder_scope = {
					character = FROM
				}
				AND = {
					tier = BARON
					holder_scope = {
						liege = {
							character = FROM
						}
					}
				}
			}
		}
		
		allow = {
			FROM = {
				piety = 250
				prisoner = no
				NOT = { trait = incapable }
				NOT = { is_inaccessible_trigger = yes }
				NOT = { society_member_of = secret_religious_cult }
			}
		}
		
		effect = {
			FROM = {
				piety = -250
				set_secret_religion = slavic_pagan_reformed
			}
		}
		
		revoke_allowed = {
			always = no
		}
		
		ai_will_do = {
			factor = 0
		}
	}
	
	secretly_convert_to_tengri_pagan_holy_site = {
		filter = owned
		ai_target_filter = self
	
		only_playable = yes
		
		from_potential = {
			ai = no
			NOT = { trait = incapable }
			NOT = { secret_religion = tengri_pagan }
			NOT = { has_global_flag = tengri_reformation }
			NOT = { religion = tengri_pagan }
			NOT = { controls_religion = yes }
			NOT = {
				has_alternate_start_parameter = { key = religion_names value = random }
			}
		}
		
		potential = {
			OR = {
				has_dlc = "The Old Gods"
				has_dlc = "Holy Fury"
			}
			tier = COUNT
			NOT = {
				location = { religion = tengri_pagan }
			}
			OR = {
				is_holy_site = tengri_pagan
				any_de_jure_vassal_title = {
					is_holy_site = tengri_pagan
				}
			}
			OR = {
				holder_scope = {
					character = FROM
				}
				AND = {
					tier = BARON
					holder_scope = {
						liege = {
							character = FROM
						}
					}
				}
			}
		}
		
		allow = {
			FROM = {
				piety = 250
				prisoner = no
				NOT = { trait = incapable }
				NOT = { is_inaccessible_trigger = yes }
				NOT = { society_member_of = secret_religious_cult }
			}
		}
		
		effect = {
			FROM = {
				piety = -250
				set_secret_religion = tengri_pagan
			}
		}
		
		revoke_allowed = {
			always = no
		}
		
		ai_will_do = {
			factor = 0
		}
	}
	
	secretly_convert_to_tengri_pagan_reformed_holy_site = {
		filter = owned
		ai_target_filter = self
	
		only_playable = yes
		
		from_potential = {
			ai = no
			NOT = { trait = incapable }
			NOT = { secret_religion = tengri_pagan_reformed }
			has_global_flag = tengri_reformation
			NOT = { religion = tengri_pagan_reformed }
			NOT = { controls_religion = yes }
			NOT = {
				has_alternate_start_parameter = { key = religion_names value = random }
			}
		}
		
		potential = {
			OR = {
				has_dlc = "The Old Gods"
				has_dlc = "Holy Fury"
			}
			tier = COUNT
			NOT = {
				location = { religion = tengri_pagan_reformed }
			}
			OR = {
				is_holy_site = tengri_pagan_reformed
				any_de_jure_vassal_title = {
					is_holy_site = tengri_pagan_reformed
				}
			}
			OR = {
				holder_scope = {
					character = FROM
				}
				AND = {
					tier = BARON
					holder_scope = {
						liege = {
							character = FROM
						}
					}
				}
			}
		}
		
		allow = {
			FROM = {
				piety = 250
				prisoner = no
				NOT = { trait = incapable }
				NOT = { is_inaccessible_trigger = yes }
				NOT = { society_member_of = secret_religious_cult }
			}
		}
		
		effect = {
			FROM = {
				piety = -250
				set_secret_religion = tengri_pagan_reformed
			}
		}
		
		revoke_allowed = {
			always = no
		}
		
		ai_will_do = {
			factor = 0
		}
	}
	
	secretly_convert_to_baltic_pagan_holy_site = {
		filter = owned
		ai_target_filter = self
	
		only_playable = yes
		
		from_potential = {
			ai = no
			NOT = { trait = incapable }
			NOT = { secret_religion = baltic_pagan }
			NOT = { has_global_flag = baltic_reformation }
			NOT = { religion = baltic_pagan }
			NOT = { controls_religion = yes }
			NOT = {
				has_alternate_start_parameter = { key = religion_names value = random }
			}
		}
		
		potential = {
			OR = {
				has_dlc = "The Old Gods"
				has_dlc = "Holy Fury"
			}
			tier = COUNT
			NOT = {
				location = { religion = baltic_pagan }
			}
			OR = {
				is_holy_site = baltic_pagan
				any_de_jure_vassal_title = {
					is_holy_site = baltic_pagan
				}
			}
			OR = {
				holder_scope = {
					character = FROM
				}
				AND = {
					tier = BARON
					holder_scope = {
						liege = {
							character = FROM
						}
					}
				}
			}
		}
		
		allow = {
			FROM = {
				piety = 250
				prisoner = no
				NOT = { trait = incapable }
				NOT = { is_inaccessible_trigger = yes }
				NOT = { society_member_of = secret_religious_cult }
			}
		}
		
		effect = {
			FROM = {
				piety = -250
				set_secret_religion = baltic_pagan
			}
		}
		
		revoke_allowed = {
			always = no
		}
		
		ai_will_do = {
			factor = 0
		}
	}
	
	secretly_convert_to_baltic_pagan_reformed_holy_site = {
		filter = owned
		ai_target_filter = self
	
		only_playable = yes
		
		from_potential = {
			ai = no
			NOT = { trait = incapable }
			NOT = { secret_religion = baltic_pagan_reformed }
			has_global_flag = baltic_reformation
			NOT = { religion = baltic_pagan_reformed }
			NOT = { controls_religion = yes }
			NOT = {
				has_alternate_start_parameter = { key = religion_names value = random }
			}
		}
		
		potential = {
			OR = {
				has_dlc = "The Old Gods"
				has_dlc = "Holy Fury"
			}
			tier = COUNT
			NOT = {
				location = { religion = baltic_pagan_reformed }
			}
			OR = {
				is_holy_site = baltic_pagan_reformed
				any_de_jure_vassal_title = {
					is_holy_site = baltic_pagan_reformed
				}
			}
			OR = {
				holder_scope = {
					character = FROM
				}
				AND = {
					tier = BARON
					holder_scope = {
						liege = {
							character = FROM
						}
					}
				}
			}
		}
		
		allow = {
			FROM = {
				piety = 250
				prisoner = no
				NOT = { trait = incapable }
				NOT = { is_inaccessible_trigger = yes }
				NOT = { society_member_of = secret_religious_cult }
			}
		}
		
		effect = {
			FROM = {
				piety = -250
				set_secret_religion = baltic_pagan_reformed
			}
		}
		
		revoke_allowed = {
			always = no
		}
		
		ai_will_do = {
			factor = 0
		}
	}
	
	secretly_convert_to_finnish_pagan_holy_site = {
		filter = owned
		ai_target_filter = self
	
		only_playable = yes
		
		from_potential = {
			ai = no
			NOT = { trait = incapable }
			NOT = { secret_religion = finnish_pagan }
			NOT = { has_global_flag = finnish_reformation }
			NOT = { religion = finnish_pagan }
			NOT = { controls_religion = yes }
			NOT = {
				has_alternate_start_parameter = { key = religion_names value = random }
			}
		}
		
		potential = {
			OR = {
				has_dlc = "The Old Gods"
				has_dlc = "Holy Fury"
			}
			tier = COUNT
			NOT = {
				location = { religion = finnish_pagan }
			}
			OR = {
				is_holy_site = finnish_pagan
				any_de_jure_vassal_title = {
					is_holy_site = finnish_pagan
				}
			}
			OR = {
				holder_scope = {
					character = FROM
				}
				AND = {
					tier = BARON
					holder_scope = {
						liege = {
							character = FROM
						}
					}
				}
			}
		}
		
		allow = {
			FROM = {
				piety = 250
				prisoner = no
				NOT = { trait = incapable }
				NOT = { is_inaccessible_trigger = yes }
				NOT = { society_member_of = secret_religious_cult }
			}
		}
		
		effect = {
			FROM = {
				piety = -250
				set_secret_religion = finnish_pagan
			}
		}
		
		revoke_allowed = {
			always = no
		}
		
		ai_will_do = {
			factor = 0
		}
	}
	
	secretly_convert_to_finnish_pagan_reformed_holy_site = {
		filter = owned
		ai_target_filter = self
	
		only_playable = yes
		
		from_potential = {
			ai = no
			NOT = { trait = incapable }
			NOT = { secret_religion = finnish_pagan_reformed }
			has_global_flag = finnish_reformation
			NOT = { religion = finnish_pagan_reformed }
			NOT = { controls_religion = yes }
			NOT = {
				has_alternate_start_parameter = { key = religion_names value = random }
			}
		}
		
		potential = {
			OR = {
				has_dlc = "The Old Gods"
				has_dlc = "Holy Fury"
			}
			tier = COUNT
			NOT = {
				location = { religion = finnish_pagan_reformed }
			}
			OR = {
				is_holy_site = finnish_pagan_reformed
				any_de_jure_vassal_title = {
					is_holy_site = finnish_pagan_reformed
				}
			}
			OR = {
				holder_scope = {
					character = FROM
				}
				AND = {
					tier = BARON
					holder_scope = {
						liege = {
							character = FROM
						}
					}
				}
			}
		}
		
		allow = {
			FROM = {
				piety = 250
				prisoner = no
				NOT = { trait = incapable }
				NOT = { is_inaccessible_trigger = yes }
				NOT = { society_member_of = secret_religious_cult }
			}
		}
		
		effect = {
			FROM = {
				piety = -250
				set_secret_religion = finnish_pagan_reformed
			}
		}
		
		revoke_allowed = {
			always = no
		}
		
		ai_will_do = {
			factor = 0
		}
	}
	
	secretly_convert_to_west_african_pagan_holy_site = {
		filter = owned
		ai_target_filter = self
	
		only_playable = yes
		
		from_potential = {
			ai = no
			NOT = { trait = incapable }
			NOT = { secret_religion = west_african_pagan }
			NOT = { has_global_flag = west_african_reformation }
			NOT = { religion = west_african_pagan }
			NOT = { controls_religion = yes }
			NOT = {
				has_alternate_start_parameter = { key = religion_names value = random }
			}
		}
		
		potential = {
			OR = {
				has_dlc = "The Old Gods"
				has_dlc = "Holy Fury"
			}
			tier = COUNT
			NOT = {
				location = { religion = west_african_pagan }
			}
			OR = {
				is_holy_site = west_african_pagan
				any_de_jure_vassal_title = {
					is_holy_site = west_african_pagan
				}
			}
			OR = {
				holder_scope = {
					character = FROM
				}
				AND = {
					tier = BARON
					holder_scope = {
						liege = {
							character = FROM
						}
					}
				}
			}
		}
		
		allow = {
			FROM = {
				piety = 250
				prisoner = no
				NOT = { trait = incapable }
				NOT = { is_inaccessible_trigger = yes }
				NOT = { society_member_of = secret_religious_cult }
			}
		}
		
		effect = {
			FROM = {
				piety = -250
				set_secret_religion = west_african_pagan
			}
		}
		
		revoke_allowed = {
			always = no
		}
		
		ai_will_do = {
			factor = 0
		}
	}
	
	secretly_convert_to_west_african_pagan_reformed_holy_site = {
		filter = owned
		ai_target_filter = self
	
		only_playable = yes
		
		from_potential = {
			ai = no
			NOT = { trait = incapable }
			NOT = { secret_religion = west_african_pagan_reformed }
			has_global_flag = west_african_reformation
			NOT = { religion = west_african_pagan_reformed }
			NOT = { controls_religion = yes }
			NOT = {
				has_alternate_start_parameter = { key = religion_names value = random }
			}
		}
		
		potential = {
			OR = {
				has_dlc = "The Old Gods"
				has_dlc = "Holy Fury"
			}
			tier = COUNT
			NOT = {
				location = { religion = west_african_pagan_reformed }
			}
			OR = {
				is_holy_site = west_african_pagan_reformed
				any_de_jure_vassal_title = {
					is_holy_site = west_african_pagan_reformed
				}
			}
			OR = {
				holder_scope = {
					character = FROM
				}
				AND = {
					tier = BARON
					holder_scope = {
						liege = {
							character = FROM
						}
					}
				}
			}
		}
		
		allow = {
			FROM = {
				piety = 250
				prisoner = no
				NOT = { trait = incapable }
				NOT = { is_inaccessible_trigger = yes }
				NOT = { society_member_of = secret_religious_cult }
			}
		}
		
		effect = {
			FROM = {
				piety = -250
				set_secret_religion = west_african_pagan_reformed
			}
		}
		
		revoke_allowed = {
			always = no
		}
		
		ai_will_do = {
			factor = 0
		}
	}
	
	secretly_convert_to_aztec_holy_site = {
		filter = owned
		ai_target_filter = self
	
		only_playable = yes
		
		from_potential = {
			ai = no
			NOT = { trait = incapable }
			NOT = { secret_religion = aztec }
			has_global_flag = aztec_arrival
			NOT = { has_global_flag = aztec_reformation }
			NOT = { religion = aztec }
			NOT = { controls_religion = yes }
			NOT = {
				has_alternate_start_parameter = { key = religion_names value = random }
			}
		}
		
		potential = {
			OR = {
				has_dlc = "The Old Gods"
				has_dlc = "Holy Fury"
			}
			tier = COUNT
			NOT = {
				location = { religion = aztec }
			}
			OR = {
				is_holy_site = aztec
				any_de_jure_vassal_title = {
					is_holy_site = aztec
				}
			}
			OR = {
				holder_scope = {
					character = FROM
				}
				AND = {
					tier = BARON
					holder_scope = {
						liege = {
							character = FROM
						}
					}
				}
			}
		}
		
		allow = {
			FROM = {
				piety = 250
				prisoner = no
				NOT = { trait = incapable }
				NOT = { is_inaccessible_trigger = yes }
				NOT = { society_member_of = secret_religious_cult }
			}
		}
		
		effect = {
			FROM = {
				piety = -250
				set_secret_religion = aztec
			}
		}
		
		revoke_allowed = {
			always = no
		}
		
		ai_will_do = {
			factor = 0
		}
	}
	
	secretly_convert_to_aztec_reformed_holy_site = {
		filter = owned
		ai_target_filter = self
	
		only_playable = yes
		
		from_potential = {
			ai = no
			NOT = { trait = incapable }
			NOT = { secret_religion = aztec_reformed }
			has_global_flag = aztec_arrival
			has_global_flag = aztec_reformation
			NOT = { religion = aztec_reformed }
			NOT = { controls_religion = yes }
			NOT = {
				has_alternate_start_parameter = { key = religion_names value = random }
			}
		}
		
		potential = {
			OR = {
				has_dlc = "The Old Gods"
				has_dlc = "Holy Fury"
			}
			tier = COUNT
			NOT = {
				location = { religion = aztec_reformed }
			}
			OR = {
				is_holy_site = aztec_reformed
				any_de_jure_vassal_title = {
					is_holy_site = aztec_reformed
				}
			}
			OR = {
				holder_scope = {
					character = FROM
				}
				AND = {
					tier = BARON
					holder_scope = {
						liege = {
							character = FROM
						}
					}
				}
			}
		}
		
		allow = {
			FROM = {
				piety = 250
				prisoner = no
				NOT = { trait = incapable }
				NOT = { is_inaccessible_trigger = yes }
				NOT = { society_member_of = secret_religious_cult }
			}
		}
		
		effect = {
			FROM = {
				piety = -250
				set_secret_religion = aztec_reformed
			}
		}
		
		revoke_allowed = {
			always = no
		}
		
		ai_will_do = {
			factor = 0
		}
	}
		
	secretly_convert_to_zun_pagan_holy_site = {
		filter = owned
		ai_target_filter = self
	
		only_playable = yes
		
		from_potential = {
			ai = no
			NOT = { trait = incapable }
			NOT = { secret_religion = zun_pagan }
			NOT = { has_global_flag = zun_reformation }
			NOT = { religion = zun_pagan }
			NOT = { controls_religion = yes }
			NOT = {
				has_alternate_start_parameter = { key = religion_names value = random }
			}
		}
		
		potential = {
			OR = {
				has_dlc = "The Old Gods"
				has_dlc = "Holy Fury"
			}
			tier = COUNT
			NOT = {
				location = { religion = zun_pagan }
			}
			OR = {
				is_holy_site = zun_pagan
				any_de_jure_vassal_title = {
					is_holy_site = zun_pagan
				}
			}
			OR = {
				holder_scope = {
					character = FROM
				}
				AND = {
					tier = BARON
					holder_scope = {
						liege = {
							character = FROM
						}
					}
				}
			}
		}
		
		allow = {
			FROM = {
				piety = 250
				prisoner = no
				NOT = { trait = incapable }
				NOT = { is_inaccessible_trigger = yes }
			}
		}
		
		effect = {
			FROM = {
				piety = -250
				set_secret_religion = zun_pagan
			}
		}
		
		revoke_allowed = {
			always = no
		}
		
		ai_will_do = {
			factor = 0
		}
	}
	
	secretly_convert_to_zun_pagan_reformed_holy_site = {
		filter = owned
		ai_target_filter = self
	
		only_playable = yes
		
		from_potential = {
			ai = no
			NOT = { trait = incapable }
			NOT = { secret_religion = zun_pagan_reformed }
			has_global_flag = zun_reformation
			NOT = { religion = zun_pagan_reformed }
			NOT = { controls_religion = yes }
			NOT = {
				has_alternate_start_parameter = { key = religion_names value = random }
			}
		}
		
		potential = {
			OR = {
				has_dlc = "The Old Gods"
				has_dlc = "Holy Fury"
			}
			tier = COUNT
			NOT = {
				location = { religion = zun_pagan_reformed }
			}
			OR = {
				is_holy_site = zun_pagan_reformed
				any_de_jure_vassal_title = {
					is_holy_site = zun_pagan_reformed
				}
			}
			OR = {
				holder_scope = {
					character = FROM
				}
				AND = {
					tier = BARON
					holder_scope = {
						liege = {
							character = FROM
						}
					}
				}
			}
		}
		
		allow = {
			FROM = {
				piety = 250
				prisoner = no
				NOT = { trait = incapable }
				NOT = { is_inaccessible_trigger = yes }
				NOT = { society_member_of = secret_religious_cult }
			}
		}
		
		effect = {
			FROM = {
				piety = -250
				set_secret_religion = zun_pagan_reformed
			}
		}
		
		revoke_allowed = {
			always = no
		}
		
		ai_will_do = {
			factor = 0
		}
	}
}

targeted_decisions = {
	secretly_convert_to_close_relations_religion = {
		#filter
		ai_target_filter = self
	
		only_playable = yes
		
		from_potential = {
			ai = no
			NOT = { trait = incapable }
			NOT = { controls_religion = yes }
		}
		
		potential = {
			OR = {
				AND = {
					spouse = {
						character = FROM
					}
					dlc_religion_check_trigger = yes
					NOR = { 
						religion = FROM
						religion = { target_type = secret target = FROM }
					}
				}
				AND = {
					consort = {
						character = FROM
					}
					dlc_religion_check_trigger = yes
					NOR = { 
						religion = FROM
						religion = { target_type = secret target = FROM }
					}
				}
				AND = {
					dlc_religion_check_trigger = yes
					is_friend = FROM
					NOR = { 
						religion = FROM
						religion = { target_type = secret target = FROM }
					}
				}
			}
		}
		
		allow = {
			FROM = {
				piety = 250
				prisoner = no
				NOT = { trait = incapable }
				NOT = { is_inaccessible_trigger = yes }
				NOT = { society_member_of = secret_religious_cult }
			}
		}
		
		effect = {
			FROM = { set_secret_religion = { target_type = public target = PREV } }
			FROM = { piety = -250 }
		}
		
		revoke_allowed = {
			always = no
		}
		
		ai_will_do = {
			factor = 0
		}
	}
}